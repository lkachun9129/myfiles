(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2xNJ":function(e,t,n){"use strict";n.r(t),n.d(t,"RegistrationModule",(function(){return Ve}));var o=n("Jb9y"),r=n("hcq0"),i=n("z70j"),c=n("DUip"),s=n("ztv4"),a=n("6blF"),l=n("Rhmc"),u=n("TYT/"),b=n("fXY4"),d=n("1R/m"),p=n("E1rE"),m=n("UXSR"),f=n("QJY3"),h=n("mrSG"),g=function(e){function t(t){var n=e.call(this,null,null)||this;return n._elementRef=t,n.ngSubmit.subscribe((function(e){n._elementRef.nativeElement.classList.add("ng-submitted")})),n}return Object(h.b)(t,e),t.\u0275fac=function(e){return new(e||t)(u.Nb(u.l))},t.\u0275dir=u.Ib({type:t,selectors:[["","masterFormGroup",""]],inputs:{form:["masterFormGroup","form"]},features:[u.yb]}),t}(f.j),v=n("Valr");function S(e,t){if(1&e&&(u.Rb(0),u.Ob(1,"i",3),u.Tb(2,"span",4),u.zc(3),u.Sb(),u.Qb()),2&e){var n=t.$implicit,o=u.dc(2);u.Bb(3),u.Ac(n(o.formField.errorMessage))}}function y(e,t){if(1&e&&(u.Tb(0,"div",1),u.xc(1,S,4,1,"ng-container",2),u.Sb()),2&e){var n=u.dc();u.jc("hidden",!n.isShown()),u.Bb(1),u.jc("translocoScope",n.scopeName+".ErrorMsg")("translocoRead",n.scopeName+".ErrorMsg")}}var T=function(){function e(e){this.formRef=e}return e.prototype.isShown=function(){var e;return!(!this.formField.errors||!((null===(e=this.formRef)||void 0===e?void 0:e.submitted)||this.formField.touched&&this.formField.dirty||this.formField.touched))},e.\u0275fac=function(t){return new(t||e)(u.Nb(g))},e.\u0275cmp=u.Hb({type:e,selectors:[["error-msg"]],inputs:{scopeName:"scopeName",formField:"formField"},features:[u.Ab([],[{provide:f.b,useExisting:g}])],decls:1,vars:1,consts:[["class","error-msg-container",3,"hidden",4,"ngIf"],[1,"error-msg-container",3,"hidden"],[4,"transloco","translocoScope","translocoRead"],[1,"fa","fa-exclamation-triangle"],[1,"ml-2"]],template:function(e,t){1&e&&u.xc(0,y,2,3,"div",0),2&e&&u.jc("ngIf",t.formField.errors)},directives:[v.l,m.e],styles:[".error-msg-container[_ngcontent-%COMP%]{padding:2px 5px!important;color:#c60000}"]}),e}();function w(e,t){if(1&e){var n=u.Ub();u.Rb(0),u.Tb(1,"div",1),u.Tb(2,"label",2),u.zc(3),u.Sb(),u.Tb(4,"div",3),u.Ob(5,"input",4),u.Tb(6,"div",5),u.Tb(7,"div",6),u.Tb(8,"div",7),u.Ob(9,"img",8),u.Tb(10,"div",9),u.Tb(11,"button",10),u.bc("click",(function(){return u.tc(n),u.dc().refreshCaptcha()})),u.Ob(12,"i",11),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Ob(13,"error-msg",12),u.Sb(),u.Sb(),u.Qb()}if(2&e){var o=t.$implicit,r=u.dc();u.Bb(1),u.jc("formGroup",r.captchaForm),u.Bb(2),u.Ac(o("msg")),u.Bb(6),u.jc("src",r.domSanitizer.bypassSecurityTrustUrl(r.captcha.image),u.vc),u.Bb(4),u.jc("scopeName",r.scopeName)("formField",r.captchaForm.controls.captcha)}}var C=function(){function e(e,t,n,o,r){this._formBuilder=e,this._portalService=t,this._alertBoxService=n,this._ngModuleRef=o,this.domSanitizer=r,this.scopeName="portal.Common.Captcha",this.loadStarted=new u.n,this.loadCompleted=new u.n,this._placeholderImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY7hw4QIABOQCcaizOWcAAAAASUVORK5CYII="}return e.prototype.ngOnInit=function(){this.captchaForm=this._formBuilder.group({captcha:["",s.d.required({message:"0018"})]}),this.captcha={image:this._placeholderImage,sessionId:""},this.refreshCaptcha()},e.prototype.refreshCaptcha=function(){var e=this;this.loadStarted.emit(),this.captcha.image=this._placeholderImage,this._portalService.getCaptcha().subscribe({next:function(t){e.captcha=t,e.loadCompleted.emit(!0)},error:function(t){e.loadCompleted.emit(!1),e._alertBoxService.show(e._ngModuleRef.componentFactoryResolver,{style:l.b.Error,buttons:[{label:"close"}],message:{scopeName:e.scopeName+".ErrorMsg",label:t}})}})},e.\u0275fac=function(t){return new(t||e)(u.Nb(s.b),u.Nb(d.a),u.Nb(b.a),u.Nb(u.x),u.Nb(p.b))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-captcha"]],outputs:{loadStarted:"loadStarted",loadCompleted:"loadCompleted"},features:[u.Ab([b.a])],decls:1,vars:2,consts:[[4,"transloco","translocoScope","translocoRead"],[1,"form-row","my-1",3,"formGroup"],[1,"col-md-5","col-form-label"],[1,"col-md-7"],["type","text","id","captcha","name","captcha","formControlName","captcha",1,"form-control","input-captcha","my-1"],[1,"form-row"],[1,"col-auto","form-inline"],[1,"input-group"],[1,"form-control","img-captcha",3,"src"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["aria-hidden","true",1,"fas","fa-redo"],[1,"col-12",3,"scopeName","formField"]],template:function(e,t){1&e&&u.xc(0,w,14,5,"ng-container",0),2&e&&u.jc("translocoScope","portal.Common.Captcha")("translocoRead","portal.Common.Captcha")},directives:[m.e,f.q,f.j,s.e,f.c,f.p,f.h,s.g,s.f,T],styles:[".input-captcha[_ngcontent-%COMP%]{max-width:200px}.img-captcha[_ngcontent-%COMP%]{width:200px;height:80px;flex:175px}"]}),e}(),B=n("w7Ih"),A=n("YEr5"),_=function(){function e(){}return e.fromUTF8Array=function(e){for(var t="",n=0;n<e.length;n++){var o=e[n];if(o<128)t+=String.fromCharCode(o);else if(o>191&&o<224)t+=String.fromCharCode((31&o)<<6|63&e[n+1]),n+=1;else if(o>223&&o<240)t+=String.fromCharCode((15&o)<<12|(63&e[n+1])<<6|63&e[n+2]),n+=2;else{var r=((7&o)<<18|(63&e[n+1])<<12|(63&e[n+2])<<6|63&e[n+3])-65536;t+=String.fromCharCode(r>>10|55296,1023&r|56320),n+=3}}return t},e.toArray=function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t},e.isNullOrEmpty=function(e){return null==e||""===e},e}(),x=function(){function e(){}return e.getValidationErrors=function(e,t,n){void 0===n&&(n=null),n||(n={});var o=(null==t?void 0:t.messageKey)?t.messageKey:e;return n[o]=!0,(null==t?void 0:t.message)&&(n[o]={message:t.message}),n},e}();function N(e){return function(t){var n=t.value;if(_.isNullOrEmpty(n))return null;if(null!=n.match(/^[A-Za-z ]+$/)){if(n.length>e.english.maxLength)return x.getValidationErrors("english",e.english)}else{if(!function(e){return null!=e.match(/^(?:[\u3400-\u4DBF\u4E00-\u9FFF]|[\uD840-\uD868\uD86A-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD87A[\uDC00-\uDFEF]|\uD87E[\uDC00-\uDE1F]|\uD884[\uDC00-\uDF4F])+$/)}(n))return x.getValidationErrors("char",e.char);if(function(e){var t=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm),n=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm,"").split("");return null===t?n.length:t.concat(n).length}(n)>e.chinese.maxLength)return x.getValidationErrors("chinese",e.chinese)}return null}}var O=function(){function e(){}return e.text=N,e}(),P=n("ah+Y"),R=n("W+ed"),k=n("gpjR"),E=n("Q1FS"),F=function(e){return e[e.NewBusiness=1]="NewBusiness",e[e.SubmitBusinessRegistrationForms=2]="SubmitBusinessRegistrationForms",e}({}),D=n("yD4X"),M=n("rAhM"),j=n("cUzu"),z=function(){function e(e,t,n,o){this._systemConfig=e,this._httpClient=t,this._scheduleService=n,this._sessionStorage=o,this.reset()}return e.prototype.reset=function(){this.appointment={trn:"",qrCode:"",serviceType:F.NewBusiness,applicant:{idType:null,id:"",surname:""},appointmentDate:null,startTime:null,endTime:null,locationEn:"",locationZh:"",registrations:[]}},e.prototype.enroll=function(e){var t=this;return new E.Observable((function(n){t._httpClient.post(t._systemConfig.getSettings("system.hostApi")+"/services/AppointmentManagement/Registration/enroll",e,{headers:D.a}).subscribe({next:function(o){o.resultCode===D.b?(t.appointment.applicant=e.applicant,t._sessionStorage.set(D.c,o.userToken),t._scheduleService.setSchedules(o.schedules),n.next()):n.error(o.resultCode)},error:function(e){n.error(""+e.status)}})}))},e.prototype.submit=function(){var e=this,t={registrations:this.appointment.registrations};return new E.Observable((function(n){e._httpClient.post(e._systemConfig.getSettings("system.hostApi")+"/services/AppointmentManagement/Registration/submit",t,{headers:D.a}).subscribe({next:function(t){t.resultCode===D.b?(e.appointment=t.appointment,n.next()):n.error(t.resultCode)},error:function(e){n.error(""+e.status)}})}))},e.\u0275fac=function(t){return new(t||e)(u.Xb(M.c),u.Xb(j.b),u.Xb(i.a),u.Xb(k.a))},e.\u0275prov=u.Jb({token:e,factory:e.\u0275fac}),e}(),I=n("WMag");function U(e,t){if(1&e&&(u.Rb(0),u.Tb(1,"h1",22),u.Tb(2,"div",23),u.zc(3),u.Sb(),u.Tb(4,"div",24),u.zc(5),u.Sb(),u.Sb(),u.Qb()),2&e){var n=t.$implicit;u.Bb(3),u.Ac(n("systemHeader")),u.Bb(2),u.Ac(n("systemSubheader"))}}function L(e,t){if(1&e&&(u.Tb(0,"div",25),u.Ob(1,"input",26),u.Ob(2,"input",27),u.Tb(3,"label"),u.zc(4,"XXX ("),u.Sb(),u.Ob(5,"input",28),u.Tb(6,"label"),u.zc(7,")"),u.Sb(),u.Ob(8,"error-msg",16),u.Ob(9,"error-msg",16),u.Ob(10,"error-msg",16),u.Sb()),2&e){var n=u.dc(2);u.Bb(8),u.jc("scopeName",n.scopeName)("formField",n.userInfoForm.controls.firstChar),u.Bb(1),u.jc("scopeName",n.scopeName)("formField",n.userInfoForm.controls.middleDigits),u.Bb(1),u.jc("scopeName",n.scopeName)("formField",n.userInfoForm.controls.checkDigit)}}function H(e,t){1&e&&(u.Tb(0,"div",25),u.Ob(1,"input",29),u.Ob(2,"input",30),u.Tb(3,"label"),u.zc(4,"XXX ("),u.Sb(),u.Ob(5,"input",31),u.Tb(6,"label"),u.zc(7,")"),u.Sb(),u.Sb())}function q(e,t){if(1&e&&(u.Tb(0,"div",6),u.Ob(1,"input",32),u.Ob(2,"error-msg",16),u.Sb()),2&e){var n=u.dc().$implicit,o=u.dc();u.Bb(1),u.kc("placeholder",n("lbl.passportPlaceholder")),u.Bb(1),u.jc("scopeName",o.scopeName)("formField",o.userInfoForm.controls.passport)}}function V(e,t){if(1&e&&(u.Tb(0,"div",6),u.Ob(1,"input",33),u.Sb()),2&e){var n=u.dc().$implicit;u.Bb(1),u.kc("placeholder",n("lbl.passportPlaceholder"))}}function X(e,t){if(1&e){var n=u.Ub();u.Rb(0),u.Ob(1,"portal-header"),u.Tb(2,"form",1),u.Tb(3,"div",2),u.xc(4,U,6,2,"ng-container",0),u.Tb(5,"div",3),u.Tb(6,"h2"),u.zc(7),u.Sb(),u.Sb(),u.Tb(8,"div",3),u.Tb(9,"div",4),u.Tb(10,"label",5),u.zc(11),u.Sb(),u.Tb(12,"label",6),u.zc(13),u.Sb(),u.Sb(),u.Sb(),u.Tb(14,"div",3),u.Tb(15,"h3"),u.zc(16),u.Sb(),u.Tb(17,"div",7),u.Tb(18,"div",8),u.Tb(19,"div",9),u.Ob(20,"input",10),u.Tb(21,"label",11),u.zc(22),u.Sb(),u.Sb(),u.Sb(),u.xc(23,L,11,6,"div",12),u.xc(24,H,8,0,"div",12),u.Sb(),u.Tb(25,"div",7),u.Tb(26,"div",8),u.Tb(27,"div",9),u.Ob(28,"input",13),u.Tb(29,"label",14),u.zc(30),u.Sb(),u.Sb(),u.Sb(),u.xc(31,q,3,3,"div",15),u.xc(32,V,2,1,"div",15),u.Ob(33,"error-msg",16),u.Sb(),u.Tb(34,"div",4),u.Tb(35,"label",17),u.zc(36),u.Sb(),u.Tb(37,"div",6),u.Ob(38,"input",18),u.Ob(39,"error-msg",16),u.Sb(),u.Sb(),u.Sb(),u.Tb(40,"div",3),u.Tb(41,"app-captcha",19),u.bc("loadStarted",(function(){return u.tc(n),u.dc().onLoadCaptchaStarted()}))("loadCompleted",(function(e){return u.tc(n),u.dc().onLoadCaptchaCompleted(e)})),u.Sb(),u.Sb(),u.Ob(42,"command-bar",20),u.Sb(),u.Sb(),u.Ob(43,"splash-screen",21),u.Qb()}if(2&e){var o=t.$implicit,r=u.dc();u.Bb(2),u.jc("masterFormGroup",r.userInfoForm)("formGroup",r.userInfoForm),u.Bb(2),u.jc("translocoScope","portal.Common")("translocoRead","portal.Common"),u.Bb(3),u.Ac(o("lbl.step3")),u.Bb(4),u.Ac(o("lbl.serviceType")),u.Bb(2),u.Ac(o("lbl.serviceTypeRegistration")),u.Bb(3),u.Ac(o("lbl.serviceUserInfo")),u.Bb(4),u.jc("value",r.IdType.HKIC),u.Bb(2),u.Ac(o("lbl.hkic")),u.Bb(1),u.jc("ngIf",r.userInfoForm.controls.idType.value===r.IdType.HKIC),u.Bb(1),u.jc("ngIf",r.userInfoForm.controls.idType.value!==r.IdType.HKIC),u.Bb(4),u.jc("value",r.IdType.Passport),u.Bb(2),u.Ac(o("lbl.passport")),u.Bb(1),u.jc("ngIf",r.userInfoForm.controls.idType.value===r.IdType.Passport),u.Bb(1),u.jc("ngIf",r.userInfoForm.controls.idType.value!==r.IdType.Passport),u.Bb(1),u.jc("scopeName",r.scopeName)("formField",r.userInfoForm.controls.idType),u.Bb(3),u.Ac(o("lbl.surname")),u.Bb(3),u.jc("scopeName",r.scopeName)("formField",r.userInfoForm.controls.surname),u.Bb(3),u.jc("buttons",r.commandBarButtons),u.Bb(1),u.jc("position",r.splashScreenConfig.position)("status",r.splashScreenConfig.status)("visibility",r.splashScreenConfig.visibility)("message",r.splashScreenConfig.message)}}var K=function(){function e(e,t,n,o,r,i,c,s){var l=this;this._portalService=e,this._router=t,this._heartbeatService=n,this._registrationService=o,this._scheduleService=r,this._formBuilder=i,this._alertBoxService=c,this._ngModuleRef=s,this.scopeName="portal.Registration.Step3",this.IdType=P.a,this.commandBarButtons=[],this.splashScreenConfig={position:A.b.Fixed,message:{scopeName:this.scopeName,label:"loading"},visibility:!1,status:A.c.Loading},this._portalService.setPageTitle(this.scopeName+".title"),this.commandBarButtons.push({type:B.b.SubmitButton,content:{scopeName:this.scopeName,label:"btn.continue"},style:B.a.Positive,hidden:!1,disabled:!1,action:function(){return new a.a((function(e){l.onContinueButtonClick(),e.next()}))}},{content:{scopeName:this.scopeName,label:"btn.abort"},style:B.a.Normal,hidden:!1,disabled:!1,action:function(){return new a.a((function(e){l.onAbortButtonClick(),e.next()}))}})}return e.prototype.ngOnInit=function(){this._registrationService.reset(),this._scheduleService.reset(),this.userInfoForm=this._formBuilder.group({idType:["",s.d.required({message:"0001"})],firstChar:["",s.d.compose({conditionalExpression:function(e,t){return t.idType===P.a.HKIC},validators:[s.d.required({message:"0002"}),s.d.pattern({expression:{onlyAlpha:/^[A-Za-z]+$/},message:"0003"}),s.d.maxLength({message:"0004",value:2})]})],middleDigits:["",s.d.compose({conditionalExpression:function(e,t){return t.idType===P.a.HKIC},validators:[s.d.required({message:"0005"}),s.d.digit({message:"0006"}),s.d.minLength({message:"0007",value:3}),s.d.maxLength({message:"0007",value:3})]})],checkDigit:["",s.d.compose({conditionalExpression:function(e,t){return t.idType===P.a.HKIC},validators:[s.d.required({message:"0008"}),s.d.pattern({expression:{idCheckDigit:/^[0-9A]+$/},message:"0009"}),s.d.maxLength({message:"0010",value:1})]})],passport:["",s.d.compose({conditionalExpression:function(e,t){return t.idType===P.a.Passport},validators:[s.d.required({message:"0011"}),s.d.alphaNumeric({message:"0012"}),s.d.minLength({message:"0013",value:5}),s.d.maxLength({message:"0013",value:5})]})],surname:["",[s.d.required({message:"0014"}),O.text({char:{message:"0015"},english:{message:"0016",maxLength:15},chinese:{message:"0017",maxLength:2}})]]})},e.prototype.onLoadCaptchaStarted=function(){this.splashScreenConfig.visibility=!0},e.prototype.onLoadCaptchaCompleted=function(e){this.commandBarButtons[0].disabled=!e,this.splashScreenConfig.visibility=!1},e.prototype.onAbortButtonClick=function(){this._router.navigate(["/landing/welcome"])},e.prototype.onContinueButtonClick=function(){var e=this;if(this.userInfoForm.valid){this.splashScreenConfig.visibility=!0,this._portalService.getBrowserInfo();var t=this.userInfoForm.value;this._registrationService.enroll({applicant:{id:t.idType===P.a.HKIC?t.firstChar+t.middleDigits+t.checkDigit:t.passport,idType:t.idType,surname:t.surname},captcha:this._captchaComponent.captchaForm.value.captcha,sessionId:this._captchaComponent.captcha.sessionId}).subscribe({next:function(){e._heartbeatService.start(),e._router.navigate(["/registration/step4"])},error:function(t){e.splashScreenConfig.visibility=!1,e._alertBoxService.show(e._ngModuleRef.componentFactoryResolver,{style:l.b.Error,buttons:[{label:"close"}],message:{scopeName:e.scopeName+".ErrorMsg",label:t}})}})}},e.\u0275fac=function(t){return new(t||e)(u.Nb(d.a),u.Nb(c.a),u.Nb(R.a),u.Nb(z),u.Nb(i.a),u.Nb(s.b),u.Nb(b.a),u.Nb(u.x))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-step3"]],viewQuery:function(e,t){var n;1&e&&u.Dc(C,!0),2&e&&u.qc(n=u.cc())&&(t._captchaComponent=n.first)},decls:1,vars:2,consts:[[4,"transloco","translocoScope","translocoRead"],[3,"masterFormGroup","formGroup"],[1,"container","main-content"],[1,"container-fluid","content-box"],[1,"form-row"],[1,"col-md-5","form-label-bold"],[1,"col-md-7"],[1,"form-row","my-1"],[1,"col-md-5"],[1,"form-check","col-form-label"],["formControlName","idType","type","radio","name","idType","id","hkic",1,"form-check-input",3,"value"],["for","hkic",1,"form-check-label"],["class","col-md-7 form-inline",4,"ngIf"],["formControlName","idType","type","radio","name","idType","id","passport",1,"form-check-input",3,"value"],["for","passport",1,"form-check-label"],["class","col-md-7",4,"ngIf"],[1,"col-12",3,"scopeName","formField"],[1,"col-md-5","col-form-label"],["formControlName","surname","type","text",1,"form-control"],[3,"loadStarted","loadCompleted"],[3,"buttons"],[3,"position","status","visibility","message"],[1,"d-none","d-sm-block"],[1,"d-sm-block","d-md-inline"],[1,"subheader","d-sm-block","d-md-inline"],[1,"col-md-7","form-inline"],["formControlName","firstChar","type","text","placeholder","AA",1,"form-control","input-two-char","mr-2"],["formControlName","middleDigits","type","text","placeholder","123",1,"form-control","input-three-char","mr-1"],["formControlName","checkDigit","type","text","placeholder","9",1,"form-control","input-one-char","mx-1"],["type","text","placeholder","AA","disabled","",1,"form-control","input-two-char","mr-2"],["type","text","placeholder","123","disabled","",1,"form-control","input-three-char","mr-1"],["type","text","placeholder","9","disabled","",1,"form-control","input-one-char","mx-1"],["formControlName","passport","type","text",1,"form-control","input-passport",3,"placeholder"],["type","text","disabled","",1,"form-control","input-passport",3,"placeholder"]],template:function(e,t){1&e&&u.xc(0,X,44,26,"ng-container",0),2&e&&u.jc("translocoScope",t.scopeName)("translocoRead",t.scopeName)},directives:[m.e,I.a,f.t,f.q,g,f.j,s.e,f.c,f.r,f.p,f.h,s.g,s.f,v.l,T,C,B.c,A.a],styles:[".input-one-char[_ngcontent-%COMP%]{width:40px}.input-two-char[_ngcontent-%COMP%]{width:50px}.input-three-char[_ngcontent-%COMP%]{width:60px}.input-passport[_ngcontent-%COMP%]{width:300px}"]}),e}(),J=n("qjeo"),G=function(e){return e.AM="A",e.PM="P",e}({});function Q(e,t){if(1&e&&(u.Tb(0,"span",8),u.zc(1),u.Sb()),2&e){var n=u.dc(2).$implicit;u.Bb(1),u.Ac(n("lbl.full"))}}var W=function(e,t,n){return{available:e,full:t,selected:n}};function $(e,t){if(1&e){var n=u.Ub();u.Tb(0,"div",5),u.Tb(1,"div",6),u.bc("click",(function(){u.tc(n);var e=t.$implicit;return u.dc(2).onAppointmentTimeslotSelected(e)})),u.zc(2),u.xc(3,Q,2,1,"span",7),u.Sb(),u.Sb()}if(2&e){var o=t.$implicit,r=u.dc(2);u.Bb(1),u.jc("ngClass",u.nc(4,W,o.status===r.BookingStatus.Available,o.status===r.BookingStatus.Full,o.status===r.BookingStatus.Selected)),u.Bb(1),u.Cc("",r.getFormattedTime(o.startTime)," - ",r.getFormattedTime(o.endTime)," "),u.Bb(1),u.jc("ngIf",o.status===r.BookingStatus.Full)}}function Y(e,t){if(1&e&&(u.Tb(0,"span",8),u.zc(1),u.Sb()),2&e){var n=u.dc(2).$implicit;u.Bb(1),u.Ac(n("lbl.full"))}}function Z(e,t){if(1&e){var n=u.Ub();u.Tb(0,"div",5),u.Tb(1,"div",6),u.bc("click",(function(){u.tc(n);var e=t.$implicit;return u.dc(2).onAppointmentTimeslotSelected(e)})),u.zc(2),u.xc(3,Y,2,1,"span",7),u.Sb(),u.Sb()}if(2&e){var o=t.$implicit,r=u.dc(2);u.Bb(1),u.jc("ngClass",u.nc(4,W,o.status===r.BookingStatus.Available,o.status===r.BookingStatus.Full,o.status===r.BookingStatus.Selected)),u.Bb(1),u.Cc("",r.getFormattedTime(o.startTime)," - ",r.getFormattedTime(o.endTime)," "),u.Bb(1),u.jc("ngIf",o.status===r.BookingStatus.Full)}}function ee(e,t){if(1&e&&(u.Rb(0),u.Tb(1,"div",1),u.Tb(2,"div",2),u.Tb(3,"div",3),u.zc(4),u.Sb(),u.Sb(),u.Tb(5,"div"),u.xc(6,$,4,8,"div",4),u.Sb(),u.Sb(),u.Tb(7,"div",1),u.Tb(8,"div",2),u.Tb(9,"div",3),u.zc(10),u.Sb(),u.Sb(),u.Tb(11,"div"),u.xc(12,Z,4,8,"div",4),u.Sb(),u.Sb(),u.Qb()),2&e){var n=t.$implicit,o=u.dc();u.Bb(4),u.Ac(n("lbl.am")),u.Bb(2),u.jc("ngForOf",o.amTimeslots),u.Bb(4),u.Ac(n("lbl.pm")),u.Bb(2),u.jc("ngForOf",o.pmTimeslots)}}var te=function(){function e(e){var t=this;this._scheduleService=e,this.scopeName="portal.common.timeslot",this.BookingStatus=J.a,this.Meridiem=G,this.amTimeslots=[],this.pmTimeslots=[],this.loadTimeslotStarted=new u.n,this.loadTimeslotCompleted=new u.n,e.schedulesUpdated.subscribe((function(){t.refreshTimeslots()}))}return e.prototype.ngOnInit=function(){this.refreshTimeslots()},e.prototype.onAppointmentTimeslotSelected=function(e){var t=this;e.status===this.BookingStatus.Available&&(this.loadTimeslotStarted.emit(),this._scheduleService.acquireTimeSlot({appointmentDate:this._scheduleService.selectedSchedule.appointmentDate,slotId:e.slotId}).subscribe({next:function(){t.loadTimeslotCompleted.emit(D.b)},error:function(e){t.loadTimeslotCompleted.emit(e)}}))},e.prototype.getFormattedTime=function(e){e>1200&&(e-=1200);var t=4===e.toString().length?e.toString():"0"+e;return t.substring(0,2)+":"+t.substring(2,4)},e.prototype.refreshTimeslots=function(){var e=this;this.amTimeslots.length=0,this.pmTimeslots.length=0,this._scheduleService.timeSlots.filter((function(e){return e.startTime<1200})).forEach((function(t){return e.amTimeslots.push(t)})),this._scheduleService.timeSlots.filter((function(e){return e.startTime>=1200})).forEach((function(t){return e.pmTimeslots.push(t)}))},e.\u0275fac=function(t){return new(t||e)(u.Nb(i.a))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-timeslot"]],outputs:{loadTimeslotStarted:"loadTimeslotStarted",loadTimeslotCompleted:"loadTimeslotCompleted"},decls:1,vars:2,consts:[[4,"transloco","translocoScope","translocoRead"],[1,"timeslot-container"],[1,"row","timeslot-header"],[1,"timeslot-cell"],["class","row timeslot-body",4,"ngFor","ngForOf"],[1,"row","timeslot-body"],[1,"timeslot-cell",3,"ngClass","click"],["class","full-label",4,"ngIf"],[1,"full-label"]],template:function(e,t){1&e&&u.xc(0,ee,13,4,"ng-container",0),2&e&&u.jc("translocoScope","portal.Common.TimeSlot")("translocoRead","portal.Common.TimeSlot")},directives:[m.e,v.k,v.j,v.l],styles:[".timeslot-container[_ngcontent-%COMP%]{display:inline-block;padding:0 15px;width:50%;vertical-align:top}@media screen and (min-width:576px){.timeslot-container[_ngcontent-%COMP%]{width:150px}}.timeslot-cell[_ngcontent-%COMP%]{background:#e7e7e9;padding-left:5px;padding-right:5px;vertical-align:middle;border:2px solid #fff;width:100%}.timeslot-header[_ngcontent-%COMP%] > .timeslot-cell[_ngcontent-%COMP%]{background:#8a8a8a;color:#fff;height:40px;line-height:40px}.timeslot-body[_ngcontent-%COMP%] > .timeslot-cell[_ngcontent-%COMP%]{height:50px;line-height:50px}.timeslot-cell.available[_ngcontent-%COMP%]{cursor:pointer;color:#007bff;background:#fff;border:1px solid #007bff;height:46px!important;width:calc(100% - 4px)!important;margin:2px}.timeslot-cell.available[_ngcontent-%COMP%]:hover{color:#d06c0a;border:1px solid #d06c0a}.timeslot-cell.full[_ngcontent-%COMP%]{cursor:not-allowed;color:#c83d3d}.timeslot-cell.selected[_ngcontent-%COMP%]{cursor:pointer;background:#d06c0a;color:#fff}.full-label[_ngcontent-%COMP%]{float:right}"]}),e}();function ne(e,t){1&e&&u.Ob(0,"div",14)}function oe(e,t){if(1&e&&(u.Rb(0),u.xc(1,ne,1,0,"div",13),u.Qb()),2&e){var n=u.dc().$implicit,o=u.dc(3);u.Bb(1),u.jc("ngForOf",o.getArray(o.toDate(n.appointmentDate).getDay()))}}function re(e,t){if(1&e&&(u.Tb(0,"span",15),u.zc(1),u.Sb()),2&e){var n=u.dc(3).$implicit;u.Bb(1),u.Ac(n("lbl.full"))}}var ie=function(e,t,n,o,r){return{available:e,full:t,selected:n,holiday:o,working:r}};function ce(e,t){if(1&e){var n=u.Ub();u.Rb(0),u.xc(1,oe,2,1,"ng-container",10),u.Tb(2,"div",11),u.bc("click",(function(){u.tc(n);var e=t.$implicit;return u.dc(3).onAppointmentDateSelected(e)})),u.zc(3),u.xc(4,re,2,1,"span",12),u.Sb(),u.Qb()}if(2&e){var o=t.$implicit,r=u.dc(3);u.Bb(1),u.jc("ngIf",1===r.toDate(o.appointmentDate).getDate()),u.Bb(1),u.jc("ngClass",u.oc(4,ie,o.status===r.BookingStatus.Available,o.status===r.BookingStatus.Full,o.status===r.BookingStatus.Selected,o.status===r.BookingStatus.Holiday,o.status===r.BookingStatus.Unavailable)),u.Bb(1),u.Bc(" ",r.toDate(o.appointmentDate).getDate()," "),u.Bb(1),u.jc("ngIf",o.status===r.BookingStatus.Full)}}function se(e,t){if(1&e&&(u.Tb(0,"div"),u.Tb(1,"div",6),u.Tb(2,"div",7),u.Tb(3,"span"),u.zc(4),u.Sb(),u.Tb(5,"span",8),u.zc(6),u.Sb(),u.Sb(),u.Sb(),u.Tb(7,"div",9),u.xc(8,ce,5,10,"ng-container",5),u.Sb(),u.Sb()),2&e){var n=t.$implicit,o=u.dc().$implicit;u.Bb(4),u.Ac(o("month."+n.month)),u.Bb(2),u.Ac(n.year),u.Bb(2),u.jc("ngForOf",n.dates)}}function ae(e,t){if(1&e&&(u.Rb(0),u.Tb(1,"div",1),u.Tb(2,"div",2),u.Tb(3,"div",3),u.zc(4),u.Sb(),u.Tb(5,"div",3),u.zc(6),u.Sb(),u.Tb(7,"div",3),u.zc(8),u.Sb(),u.Tb(9,"div",3),u.zc(10),u.Sb(),u.Tb(11,"div",3),u.zc(12),u.Sb(),u.Tb(13,"div",3),u.zc(14),u.Sb(),u.Tb(15,"div",3),u.zc(16),u.Sb(),u.Tb(17,"div",4),u.zc(18),u.Sb(),u.Tb(19,"div",4),u.zc(20),u.Sb(),u.Tb(21,"div",4),u.zc(22),u.Sb(),u.Tb(23,"div",4),u.zc(24),u.Sb(),u.Tb(25,"div",4),u.zc(26),u.Sb(),u.Tb(27,"div",4),u.zc(28),u.Sb(),u.Tb(29,"div",4),u.zc(30),u.Sb(),u.Sb(),u.xc(31,se,9,3,"div",5),u.Sb(),u.Qb()),2&e){var n=t.$implicit,o=u.dc();u.Bb(4),u.Ac(n("week.sun")),u.Bb(2),u.Ac(n("week.mon")),u.Bb(2),u.Ac(n("week.tue")),u.Bb(2),u.Ac(n("week.wed")),u.Bb(2),u.Ac(n("week.thu")),u.Bb(2),u.Ac(n("week.fri")),u.Bb(2),u.Ac(n("week.sat")),u.Bb(2),u.Ac(n("week.sunday")),u.Bb(2),u.Ac(n("week.monday")),u.Bb(2),u.Ac(n("week.tuesday")),u.Bb(2),u.Ac(n("week.wednesday")),u.Bb(2),u.Ac(n("week.thursday")),u.Bb(2),u.Ac(n("week.friday")),u.Bb(2),u.Ac(n("week.saturday")),u.Bb(1),u.jc("ngForOf",o.months)}}var le=function(){function e(e){var t=this;this._scheduleService=e,this.scopeName="portal.common.calendar",this.BookingStatus=J.a,this.months=[],this.loadSchedulesStarted=new u.n,this.loadSchedulesCompleted=new u.n,e.schedulesUpdated.subscribe((function(){t.refreshCalendar()}))}return e.prototype.ngOnInit=function(){var e=this;this.refreshCalendar(),this._scheduleService.selectedSchedule&&this._scheduleService.selectedTimeslot&&(this.loadSchedulesStarted.emit(),this._scheduleService.getSchedules({appointmentDate:this._scheduleService.selectedSchedule.appointmentDate}).subscribe({next:function(){e.loadSchedulesCompleted.emit(D.b)},error:function(t){e.loadSchedulesCompleted.emit(t)}}))},e.prototype.onAppointmentDateSelected=function(e){var t=this;e.status===this.BookingStatus.Available&&(this.loadSchedulesStarted.emit(),this._scheduleService.getSchedules({appointmentDate:e.appointmentDate}).subscribe({next:function(){t.loadSchedulesCompleted.emit(D.b)},error:function(e){t.loadSchedulesCompleted.emit(e)}}))},e.prototype.toDate=function(e){return new Date(e)},e.prototype.getArray=function(e){return Array(e).fill(0)},e.prototype.refreshCalendar=function(){var e,t;this.months.length=0;try{for(var n=Object(h.e)(this._scheduleService.schedules),o=n.next();!o.done;o=n.next()){var r=o.value,i=new Date(r.appointmentDate),c=i.getMonth();(0===this.months.length||this.months[this.months.length-1].month!=c)&&this.months.push({month:c,year:i.getFullYear(),dates:[]}),this.months[this.months.length-1].dates.push(r)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.\u0275fac=function(t){return new(t||e)(u.Nb(i.a))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-calendar"]],outputs:{loadSchedulesStarted:"loadSchedulesStarted",loadSchedulesCompleted:"loadSchedulesCompleted"},decls:1,vars:2,consts:[[4,"transloco","translocoScope","translocoRead"],[1,"calendar-container"],[1,"row","calendar-header"],[1,"calendar-cell","d-block","d-lg-none"],[1,"calendar-cell","d-none","d-lg-block"],[4,"ngFor","ngForOf"],[1,"row","calendar-title"],[1,"calendar-cell"],[1,"ml-1"],[1,"row","calendar-body"],[4,"ngIf"],[1,"calendar-cell",3,"ngClass","click"],["class","full-label",4,"ngIf"],["class","calendar-cell hidden",4,"ngFor","ngForOf"],[1,"calendar-cell","hidden"],[1,"full-label"]],template:function(e,t){1&e&&u.xc(0,ae,32,15,"ng-container",0),2&e&&u.jc("translocoScope","portal.Common.Calendar")("translocoRead","portal.Common.Calendar")},directives:[m.e,v.k,v.l,v.j],styles:[".calendar-container[_ngcontent-%COMP%]{padding:0 15px;width:100%}@media screen and (min-width:576px){.calendar-container[_ngcontent-%COMP%]{width:100%}}@media screen and (min-width:768px){.calendar-container[_ngcontent-%COMP%]{width:500px}}@media screen and (min-width:992px){.calendar-container[_ngcontent-%COMP%]{width:700px}}.calendar-cell[_ngcontent-%COMP%]{background:#e7e7e9;padding-left:5px;padding-right:5px;vertical-align:middle;border:2px solid #fff;width:14.2857142857%}.calendar-header[_ngcontent-%COMP%] > .calendar-cell[_ngcontent-%COMP%]{background:#8a8a8a;color:#fff;height:40px;line-height:40px}.calendar-body[_ngcontent-%COMP%] > .calendar-cell[_ngcontent-%COMP%]{height:50px;line-height:50px}.calendar-title[_ngcontent-%COMP%] > .calendar-cell[_ngcontent-%COMP%]{width:100%;text-align:center;height:40px;line-height:40px}.calendar-cell.hidden[_ngcontent-%COMP%]{background-color:transparent}.calendar-cell.available[_ngcontent-%COMP%]{cursor:pointer;color:#007bff;background:#fff;border:1px solid #007bff;height:46px!important;width:calc(14.28571% - 4px)!important;margin:2px}.calendar-cell.available[_ngcontent-%COMP%]:hover{color:#d06c0a;border:1px solid #d06c0a}.calendar-cell.full[_ngcontent-%COMP%]{cursor:not-allowed;color:#c83d3d}.calendar-cell.holiday[_ngcontent-%COMP%], .calendar-cell.working[_ngcontent-%COMP%]{cursor:not-allowed;color:#aaa}.calendar-cell.working[_ngcontent-%COMP%]{background:#fff;border:1px solid #aaa;height:46px!important;width:calc(14.28571% - 4px)!important;margin:2px}.calendar-cell.selected[_ngcontent-%COMP%]{cursor:pointer;background:#d06c0a;color:#fff}.full-label[_ngcontent-%COMP%]{float:right}.calendar-offset-1[_ngcontent-%COMP%]{margin-left:14.2857142857%!important}.calendar-offset-2[_ngcontent-%COMP%]{margin-left:28.5714285714%!important}.calendar-offset-3[_ngcontent-%COMP%]{margin-left:42.8571428571%!important}.calendar-offset-4[_ngcontent-%COMP%]{margin-left:57.1428571429%!important}.calendar-offset-5[_ngcontent-%COMP%]{margin-left:71.42857%!important}.calendar-offset-6[_ngcontent-%COMP%]{margin-left:85.7142857143%!important}"]}),e}();function ue(e,t){if(1&e&&(u.Rb(0),u.Tb(1,"h1",13),u.Tb(2,"div",14),u.zc(3),u.Sb(),u.Tb(4,"div",15),u.zc(5),u.Sb(),u.Sb(),u.Qb()),2&e){var n=t.$implicit;u.Bb(3),u.Ac(n("systemHeader")),u.Bb(2),u.Ac(n("systemSubheader"))}}function be(e,t){if(1&e){var n=u.Ub();u.Rb(0),u.Tb(1,"p"),u.zc(2),u.Sb(),u.Tb(3,"app-timeslot",16),u.bc("loadTimeslotStarted",(function(){return u.tc(n),u.dc(2).onLoadTimeslotsStarted()}))("loadTimeslotCompleted",(function(e){return u.tc(n),u.dc(2).onLoadTimeslotCompleted(e)})),u.Sb(),u.Ob(4,"div",4),u.Qb()}if(2&e){var o=u.dc().$implicit;u.Bb(2),u.Ac(o("lbl.timeslotNote"))}}function de(e,t){1&e&&u.Pb(0)}var pe=function(e,t,n,o,r,i){return{appointmentDateEn:e,appointmentDateZh:t,periodStartTime:n,periodEndTime:o,startTimeMeridiem:r,endTimeMeridiem:i}};function me(e,t){if(1&e&&(u.Tb(0,"label",17),u.zc(1),u.ec(2,"date"),u.ec(3,"date"),u.Sb()),2&e){var n=u.dc().$implicit,o=u.dc();u.Bb(1),u.Ac(n("lbl.appointmentDateTimeValue",u.pc(7,pe,u.gc(2,1,o.selectedAppointmentDate.appointmentDate,"d MMM yyyy"),u.gc(3,4,o.selectedAppointmentDate.appointmentDate,"yyyy\u5e74 M\u6708 d\u65e5"),o.getFormattedTime(o.selectedAppointmentTimeslot.startTime),o.getFormattedTime(o.selectedAppointmentTimeslot.endTime),n("lbl.meridiem."+(o.selectedAppointmentTimeslot.startTime<1200?o.Meridiem.AM:o.Meridiem.PM)),n("lbl.meridiem."+(o.selectedAppointmentTimeslot.endTime<1200?o.Meridiem.AM:o.Meridiem.PM)))))}}function fe(e,t){if(1&e&&(u.Tb(0,"label",17),u.zc(1),u.Sb()),2&e){var n=u.dc().$implicit;u.Bb(1),u.Ac(n("lbl.notYetSelected"))}}function he(e,t){if(1&e){var n=u.Ub();u.Rb(0),u.Ob(1,"portal-header"),u.Tb(2,"div",1),u.xc(3,ue,6,2,"ng-container",0),u.Tb(4,"div",2),u.Tb(5,"h2"),u.zc(6),u.Sb(),u.Sb(),u.Tb(7,"div",2),u.Tb(8,"p"),u.zc(9),u.Sb(),u.Tb(10,"app-calendar",3),u.bc("loadSchedulesStarted",(function(){return u.tc(n),u.dc().onLoadSchedulesStarted()}))("loadSchedulesCompleted",(function(e){return u.tc(n),u.dc().onLoadSchedulesCompleted(e)})),u.Sb(),u.Ob(11,"div",4),u.xc(12,be,5,1,"ng-container",5),u.Tb(13,"div",6),u.Tb(14,"label",7),u.zc(15),u.Sb(),u.xc(16,de,1,0,"ng-container",8),u.xc(17,me,4,14,"ng-template",null,9,u.yc),u.xc(19,fe,2,1,"ng-template",null,10,u.yc),u.Sb(),u.Sb(),u.Ob(21,"command-bar",11),u.Sb(),u.Ob(22,"splash-screen",12),u.Qb()}if(2&e){var o=t.$implicit,r=u.rc(18),i=u.rc(20),c=u.dc();u.Bb(3),u.jc("translocoScope","portal.Common")("translocoRead","portal.Common"),u.Bb(3),u.Ac(o("lbl.step4")),u.Bb(3),u.Ac(o("lbl.calendarNote")),u.Bb(3),u.jc("ngIf",c.selectedAppointmentDate),u.Bb(3),u.Ac(o("lbl.appointmentDateTime")),u.Bb(1),u.jc("ngIf",c.selectedAppointmentDate&&c.selectedAppointmentTimeslot)("ngIfThen",r)("ngIfElse",i),u.Bb(5),u.jc("buttons",c.commandBarButtons),u.Bb(1),u.jc("position",c.splashScreenConfig.position)("status",c.splashScreenConfig.status)("visibility",c.splashScreenConfig.visibility)("message",c.splashScreenConfig.message)}}var ge=function(){function e(e,t,n,o,r,i){var c=this;this._portalService=e,this._router=t,this._heartbeatService=n,this._alertBoxService=o,this._ngModuleRef=r,this._scheduleService=i,this.scopeName="portal.Registration.Step4",this.Meridiem=G,this.commandBarButtons=[],this.splashScreenConfig={position:A.b.Fixed,message:{scopeName:this.scopeName,label:"loading"},visibility:!1,status:A.c.Loading},this._portalService.setPageTitle(this.scopeName+".title"),this.commandBarButtons.push({content:{scopeName:this.scopeName,label:"btn.continue"},style:B.a.Positive,hidden:!1,disabled:!0,action:function(){return new a.a((function(e){c.onContinueButtonClick(),e.next()}))}},{content:{scopeName:this.scopeName,label:"btn.abort"},style:B.a.Normal,hidden:!1,disabled:!1,action:function(){return new a.a((function(e){c.onAbortButtonClick(),e.next()}))}}),this._heartbeatService.register(r.componentFactoryResolver)}return Object.defineProperty(e.prototype,"selectedAppointmentDate",{get:function(){return this._scheduleService.selectedSchedule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedAppointmentTimeslot",{get:function(){return this._scheduleService.selectedTimeslot},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.onAbortButtonClick=function(){var e=this;this._portalService.terminateUserSession().subscribe({next:function(){e._heartbeatService.stop(),e._router.navigate(["/landing/welcome"])},error:function(t){e._alertBoxService.show(e._ngModuleRef.componentFactoryResolver,{style:l.b.Error,buttons:[{label:"close"}],message:{scopeName:e.scopeName+".ErrorMsg",label:t}})}})},e.prototype.onContinueButtonClick=function(){this._router.navigate(["/registration/step5"])},e.prototype.onLoadSchedulesStarted=function(){this.splashScreenConfig.visibility=!0},e.prototype.onLoadSchedulesCompleted=function(e){this.splashScreenConfig.visibility=!1,e!=D.b&&this._alertBoxService.show(this._ngModuleRef.componentFactoryResolver,{style:l.b.Error,buttons:[{label:"close"}],message:{scopeName:this.scopeName+".ErrorMsg",label:e}}),this.commandBarButtons[0].disabled=!this.selectedAppointmentDate||!this.selectedAppointmentTimeslot},e.prototype.onLoadTimeslotsStarted=function(){this.splashScreenConfig.visibility=!0},e.prototype.onLoadTimeslotCompleted=function(e){this.splashScreenConfig.visibility=!1,e!=D.b&&this._alertBoxService.show(this._ngModuleRef.componentFactoryResolver,{style:l.b.Error,buttons:[{label:"close"}],message:{scopeName:this.scopeName+".ErrorMsg",label:e}}),this.commandBarButtons[0].disabled=!this.selectedAppointmentDate||!this.selectedAppointmentTimeslot},e.prototype.getFormattedTime=function(e){e>1200&&(e-=1200);var t=4===e.toString().length?e.toString():"0"+e;return t.substring(0,2)+":"+t.substring(2,4)},e.\u0275fac=function(t){return new(t||e)(u.Nb(d.a),u.Nb(c.a),u.Nb(R.a),u.Nb(b.a),u.Nb(u.x),u.Nb(i.a))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-step4"]],viewQuery:function(e,t){var n;1&e&&u.Dc(te,!0),2&e&&u.qc(n=u.cc())&&(t.timeslotComponent=n.first)},decls:1,vars:2,consts:[[4,"transloco","translocoScope","translocoRead"],[1,"container","main-content"],[1,"container-fluid","content-box"],[3,"loadSchedulesStarted","loadSchedulesCompleted"],[1,"separation"],[4,"ngIf"],[1,"row"],[1,"col-md-5","form-label-bold"],[4,"ngIf","ngIfThen","ngIfElse"],["timeslotSelected",""],["timeslotNotSelected",""],[3,"buttons"],[3,"position","status","visibility","message"],[1,"d-none","d-sm-block"],[1,"d-sm-block","d-md-inline"],[1,"subheader","d-sm-block","d-md-inline"],[3,"loadTimeslotStarted","loadTimeslotCompleted"],[1,"col-md-7"]],template:function(e,t){1&e&&u.xc(0,he,23,14,"ng-container",0),2&e&&u.jc("translocoScope",t.scopeName)("translocoRead",t.scopeName)},directives:[m.e,I.a,le,v.l,B.c,A.a,te],pipes:[v.d],styles:[""]}),e}();function ve(e,t){if(1&e&&(u.Rb(0),u.Tb(1,"h1",23),u.Tb(2,"div",24),u.zc(3),u.Sb(),u.Tb(4,"div",25),u.zc(5),u.Sb(),u.Sb(),u.Qb()),2&e){var n=t.$implicit;u.Bb(3),u.Ac(n("systemHeader")),u.Bb(2),u.Ac(n("systemSubheader"))}}function Se(e,t){if(1&e){var n=u.Ub();u.Rb(0),u.Tb(1,"tr",26),u.Tb(2,"td",27),u.Tb(3,"button",28),u.bc("click",(function(){u.tc(n);var e=t.index;return u.dc(2).removeCase(e)})),u.Ob(4,"i",29),u.Sb(),u.Sb(),u.Tb(5,"td",30),u.Tb(6,"button",31),u.bc("click",(function(){u.tc(n);var e=t.index;return u.dc(2).removeCase(e)})),u.Ob(7,"i",29),u.Tb(8,"span",21),u.zc(9),u.Sb(),u.Sb(),u.Sb(),u.Tb(10,"td"),u.zc(11),u.Sb(),u.Tb(12,"td",32),u.Ob(13,"input",33),u.Sb(),u.Sb(),u.Ob(14,"div",34),u.Ob(15,"div",34),u.Ob(16,"error-msg",35),u.Qb()}if(2&e){var o=t.index,r=u.dc().$implicit,i=u.dc();u.Bb(1),u.jc("formGroupName",o),u.Bb(8),u.Ac(r("btn.remove")),u.Bb(2),u.Ac(i.businessNames.value[o].seqNo),u.Bb(5),u.jc("scopeName",i.scopeName)("formField",i.businessNameForm.controls.businessNames.controls[o].controls.businessName)}}function ye(e,t){if(1&e){var n=u.Ub();u.Rb(0),u.Ob(1,"portal-header"),u.Tb(2,"form",1),u.Tb(3,"div",2),u.xc(4,ve,6,2,"ng-container",0),u.Tb(5,"div",3),u.Tb(6,"h2"),u.zc(7),u.Sb(),u.Sb(),u.Tb(8,"div",3),u.Tb(9,"div",4),u.Tb(10,"label",5),u.zc(11),u.Sb(),u.Tb(12,"label",6),u.zc(13),u.Sb(),u.Sb(),u.Ob(14,"div",7),u.Tb(15,"h3"),u.zc(16),u.Sb(),u.Tb(17,"p"),u.zc(18),u.Sb(),u.Tb(19,"div",8),u.Tb(20,"table",9),u.Tb(21,"thead"),u.Tb(22,"tr"),u.Ob(23,"th",10),u.Ob(24,"th",11),u.Tb(25,"th",12),u.zc(26),u.Sb(),u.Tb(27,"th",13),u.zc(28),u.Sb(),u.Sb(),u.Sb(),u.Tb(29,"tbody",14),u.xc(30,Se,17,5,"ng-container",15),u.Sb(),u.Sb(),u.Tb(31,"div",16),u.Tb(32,"div",17),u.Tb(33,"button",18),u.bc("click",(function(){return u.tc(n),u.dc().addBusinessName()})),u.Ob(34,"i",19),u.Sb(),u.Tb(35,"button",20),u.bc("click",(function(){return u.tc(n),u.dc().addBusinessName()})),u.Ob(36,"i",19),u.Tb(37,"span",21),u.zc(38),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Ob(39,"command-bar",22),u.Sb(),u.Sb(),u.Qb()}if(2&e){var o=t.$implicit,r=u.dc();u.Bb(2),u.jc("masterFormGroup",r.businessNameForm)("formGroup",r.businessNameForm),u.Bb(2),u.jc("translocoScope","portal.Common")("translocoRead","portal.Common"),u.Bb(3),u.Ac(o("lbl.step5")),u.Bb(4),u.Ac(o("lbl.serviceType")),u.Bb(2),u.Ac(o("lbl.serviceTypeRegistration")),u.Bb(3),u.Ac(o("lbl.casesDetails")),u.Bb(2),u.Ac(o("lbl.casesDetailsNotice")),u.Bb(8),u.Ac(o("lbl.number")),u.Bb(2),u.Ac(o("lbl.name")),u.Bb(2),u.jc("ngForOf",r.businessNames.controls),u.Bb(8),u.Ac(o("btn.add")),u.Bb(1),u.jc("buttons",r.commandBarButtons)}}var Te=function(){function e(e,t,n,o,r,i,c,l){var u=this;this._portalService=e,this._router=t,this._formBuilder=n,this._scheduleService=o,this._registrationService=r,this._heartbeatService=i,this._alertBoxService=c,this._ngModuleRef=l,this.scopeName="portal.Registration.Step5",this.commandBarButtons=[],this._portalService.setPageTitle(this.scopeName+".title"),this.commandBarButtons.push({content:{scopeName:this.scopeName,label:"btn.continue"},style:B.a.Positive,hidden:!1,disabled:!1,action:function(){return new a.a((function(e){u.onContinueButtonClick(),e.next()}))}},{content:{scopeName:this.scopeName,label:"btn.back"},style:B.a.Normal,hidden:!1,disabled:!1,action:function(){return new a.a((function(e){u.onBackButtonClick(),e.next()}))}},{content:{scopeName:this.scopeName,label:"btn.abort"},style:B.a.Normal,hidden:!1,disabled:!1,action:function(){return new a.a((function(e){u.onAbortButtonClick(),e.next()}))}}),this._heartbeatService.register(l.componentFactoryResolver);var b=[];this._registrationService.appointment.registrations.forEach((function(e){b.push(u.buildBusinessNameFormGroup(e.seqNo,e.businessName))})),0===b.length&&b.push(this.buildBusinessNameFormGroup(1)),this.businessNameForm=this._formBuilder.group({businessNames:new s.a([],b)})}return Object.defineProperty(e.prototype,"numberOfCases",{get:function(){return this._scheduleService.selectedSchedule.numberOfCases},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._heartbeatService.start()},e.prototype.buildBusinessNameFormGroup=function(e,t){return void 0===t&&(t=""),this._formBuilder.group({seqNo:[e],businessName:[t,[s.d.required({message:"0022"}),s.d.unique({message:"0023"}),O.text({char:{message:"0024"},english:{message:"0025",maxLength:120},chinese:{message:"0026",maxLength:30}})]]})},e.prototype.onAbortButtonClick=function(){var e=this;this._portalService.terminateUserSession().subscribe({next:function(){e._heartbeatService.stop(),e._router.navigate(["/landing/welcome"])},error:function(t){e._alertBoxService.show(e._ngModuleRef.componentFactoryResolver,{style:l.b.Error,buttons:[{label:"close"}],message:{scopeName:e.scopeName,label:t}})}})},e.prototype.onBackButtonClick=function(){var e=this;this._registrationService.appointment.registrations.length=0,this.businessNameForm.controls.businessNames.value.forEach((function(t){e._registrationService.appointment.registrations.push(t)})),this._router.navigate(["/registration/step4"])},e.prototype.onContinueButtonClick=function(){var e=this;this.businessNameForm.invalid||(this._registrationService.appointment.registrations.length=0,this.businessNameForm.controls.businessNames.value.forEach((function(t){e._registrationService.appointment.registrations.push(t)})),this._router.navigate(["/registration/step6"]))},Object.defineProperty(e.prototype,"businessNames",{get:function(){return this.businessNameForm.get("businessNames")},enumerable:!0,configurable:!0}),e.prototype.addBusinessName=function(){this.businessNames.length<this.numberOfCases&&this.businessNames.push(this.buildBusinessNameFormGroup(this.businessNames.length+1))},e.prototype.removeCase=function(e){if(this.businessNames.length>1){this.businessNames.removeAt(e);for(var t=0;t<this.businessNames.length;t++)this.businessNames.controls[t].patchValue({seqNo:t+1})}},e.\u0275fac=function(t){return new(t||e)(u.Nb(d.a),u.Nb(c.a),u.Nb(s.b),u.Nb(i.a),u.Nb(z),u.Nb(R.a),u.Nb(b.a),u.Nb(u.x))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-step5"]],decls:1,vars:2,consts:[[4,"transloco","translocoScope","translocoRead"],[3,"masterFormGroup","formGroup"],[1,"container","main-content"],[1,"container-fluid","content-box"],[1,"form-row"],[1,"col-md-2","form-label-bold"],[1,"col-md-10"],[1,"separation"],[1,"table-responsive"],[1,"table","table-fixed",2,"min-width","450px"],[1,"d-table-cell","d-sm-none",2,"width","40px","background-color","transparent"],[1,"d-none","d-sm-table-cell",2,"width","110px","background-color","transparent"],[2,"width","60px"],[2,"min-width","320px"],["formArrayName","businessNames"],[4,"ngFor","ngForOf"],[1,"row","no-gutters"],[1,"col-12"],["type","button",1,"btn","btn-normal","add-btn-mobile","d-block","d-sm-none",3,"click"],[1,"fas","fa-plus"],["type","button",1,"btn","btn-normal","add-btn","d-none","d-sm-block",3,"click"],[1,"ml-2"],[3,"buttons"],[1,"d-none","d-sm-block"],[1,"d-sm-block","d-md-inline"],[1,"subheader","d-sm-block","d-md-inline"],[3,"formGroupName"],[1,"form-group","d-table-cell","d-sm-none"],["type","button",1,"btn","btn-normal","remove-btn-mobile",3,"click"],[1,"fas","fa-trash-alt"],[1,"form-group","d-none","d-sm-table-cell"],["type","button",1,"btn","btn-normal","remove-btn",3,"click"],[1,"form-group"],["type","text","formControlName","businessName",1,"form-control"],[1,"d-table-cell"],[1,"col-12",3,"scopeName","formField"]],template:function(e,t){1&e&&u.xc(0,ye,40,14,"ng-container",0),2&e&&u.jc("translocoScope",t.scopeName)("translocoRead",t.scopeName)},directives:[m.e,I.a,f.t,f.q,g,f.j,s.e,f.e,v.k,B.c,f.k,f.c,f.p,f.h,s.g,s.f,T],styles:["td.form-group[_ngcontent-%COMP%]{padding:0!important}td.form-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:26px}.add-btn[_ngcontent-%COMP%], .remove-btn[_ngcontent-%COMP%]{width:110px}.add-btn-mobile[_ngcontent-%COMP%], .remove-btn-mobile[_ngcontent-%COMP%]{width:40px}"]}),e}();function we(e,t){if(1&e&&(u.Rb(0),u.Tb(1,"h1",14),u.Tb(2,"div",15),u.zc(3),u.Sb(),u.Tb(4,"div",16),u.zc(5),u.Sb(),u.Sb(),u.Qb()),2&e){var n=t.$implicit;u.Bb(3),u.Ac(n("systemHeader")),u.Bb(2),u.Ac(n("systemSubheader"))}}function Ce(e,t){if(1&e&&(u.Tb(0,"label",5),u.zc(1),u.Sb()),2&e){var n=u.dc(2);u.Bb(1),u.Ac(n.getFormatedHKIC(n.appointment.applicant.id))}}function Be(e,t){if(1&e&&(u.Tb(0,"label",5),u.zc(1),u.Sb()),2&e){var n=u.dc(2);u.Bb(1),u.Ac(n.appointment.applicant.id)}}function Ae(e,t){if(1&e&&(u.Tb(0,"tr"),u.Tb(1,"td"),u.zc(2),u.Sb(),u.Tb(3,"td"),u.zc(4),u.Sb(),u.Sb()),2&e){var n=t.$implicit;u.Bb(2),u.Ac(n.seqNo),u.Bb(2),u.Ac(n.businessName)}}var _e=function(e,t,n,o,r,i){return{appointmentDateEn:e,appointmentDateZh:t,periodStartTime:n,periodEndTime:o,startTimeMeridiem:r,endTimeMeridiem:i}};function xe(e,t){if(1&e&&(u.Rb(0),u.Ob(1,"portal-header"),u.Tb(2,"div",1),u.xc(3,we,6,2,"ng-container",0),u.Tb(4,"div",2),u.Tb(5,"h2"),u.zc(6),u.Sb(),u.Sb(),u.Tb(7,"div",2),u.Tb(8,"div",3),u.Tb(9,"label",4),u.zc(10),u.Sb(),u.Tb(11,"label",5),u.zc(12),u.Sb(),u.Sb(),u.Ob(13,"div",6),u.Tb(14,"div",3),u.Tb(15,"label",4),u.zc(16),u.Sb(),u.Tb(17,"label",5),u.zc(18),u.ec(19,"date"),u.ec(20,"date"),u.Sb(),u.Sb(),u.Ob(21,"div",6),u.Tb(22,"h3"),u.zc(23),u.Sb(),u.Tb(24,"div",3),u.Tb(25,"label",7),u.zc(26),u.Sb(),u.xc(27,Ce,2,1,"label",8),u.xc(28,Be,2,1,"label",8),u.Sb(),u.Tb(29,"div",3),u.Tb(30,"label",7),u.zc(31),u.Sb(),u.Tb(32,"label",5),u.zc(33),u.Sb(),u.Sb(),u.Ob(34,"div",6),u.Tb(35,"h3"),u.zc(36),u.Sb(),u.Tb(37,"table",9),u.Tb(38,"thead"),u.Tb(39,"tr"),u.Tb(40,"th",10),u.zc(41),u.Sb(),u.Tb(42,"th"),u.zc(43),u.Sb(),u.Sb(),u.Sb(),u.Tb(44,"tbody"),u.xc(45,Ae,5,2,"tr",11),u.Sb(),u.Sb(),u.Sb(),u.Ob(46,"command-bar",12),u.Sb(),u.Ob(47,"splash-screen",13),u.Qb()),2&e){var n=t.$implicit,o=u.dc();u.Bb(3),u.jc("translocoScope","portal.Common")("translocoRead","portal.Common"),u.Bb(3),u.Ac(n("lbl.step6")),u.Bb(4),u.Ac(n("lbl.serviceType")),u.Bb(2),u.Ac(n("lbl.serviceType."+o.appointment.serviceType)),u.Bb(4),u.Ac(n("lbl.appointmentDateTime")),u.Bb(2),u.Ac(n("lbl.appointmentDateTimeValue",u.pc(28,_e,u.gc(19,22,o.selectedAppointmentDate.appointmentDate,"d MMM yyyy"),u.gc(20,25,o.selectedAppointmentDate.appointmentDate,"yyyy\u5e74 M\u6708 d\u65e5"),o.getFormattedTime(o.selectedAppointmentTimeslot.startTime),o.getFormattedTime(o.selectedAppointmentTimeslot.endTime),n("lbl.meridiem."+(o.selectedAppointmentTimeslot.startTime<1200?o.Meridiem.AM:o.Meridiem.PM)),n("lbl.meridiem."+(o.selectedAppointmentTimeslot.endTime<1200?o.Meridiem.AM:o.Meridiem.PM))))),u.Bb(5),u.Ac(n("lbl.serviceUserInfo")),u.Bb(3),u.Ac(n(o.appointment.applicant.idType===o.IdType.HKIC?"lbl.hkic":"lbl.passport")),u.Bb(1),u.jc("ngIf",o.appointment.applicant.idType===o.IdType.HKIC),u.Bb(1),u.jc("ngIf",o.appointment.applicant.idType===o.IdType.Passport),u.Bb(3),u.Ac(n("lbl.surname")),u.Bb(2),u.Ac(o.appointment.applicant.surname),u.Bb(3),u.Ac(n("lbl.casesDetails")),u.Bb(5),u.Ac(n("lbl.number")),u.Bb(2),u.Ac(n("lbl.name")),u.Bb(2),u.jc("ngForOf",o.appointment.registrations),u.Bb(1),u.jc("buttons",o.commandBarButtons),u.Bb(1),u.jc("position",o.splashScreenConfig.position)("status",o.splashScreenConfig.status)("visibility",o.splashScreenConfig.visibility)("message",o.splashScreenConfig.message)}}var Ne=function(){function e(e,t,n,o,r,i,c){var s=this;this._portalService=e,this._router=t,this._heartbeatService=n,this._registrationService=o,this._scheduleService=r,this._alertBoxService=i,this._ngModuleRef=c,this.scopeName="portal.Registration.Step6",this.IdType=P.a,this.Meridiem=G,this.commandBarButtons=[],this.splashScreenConfig={position:A.b.Fixed,message:{scopeName:this.scopeName,label:"loading"},visibility:!1,status:A.c.Loading},this._portalService.setPageTitle(this.scopeName+".title"),this.commandBarButtons.push({content:{scopeName:this.scopeName,label:"btn.continue"},style:B.a.Positive,hidden:!1,disabled:!1,action:function(){return new a.a((function(e){s.onContinueButtonClick(),e.next()}))}},{content:{scopeName:this.scopeName,label:"btn.back"},style:B.a.Normal,hidden:!1,disabled:!1,action:function(){return new a.a((function(e){s.onBackButtonClick(),e.next()}))}},{content:{scopeName:this.scopeName,label:"btn.abort"},style:B.a.Normal,hidden:!1,disabled:!1,action:function(){return new a.a((function(e){s.onAbortButtonClick(),e.next()}))}}),this._heartbeatService.register(c.componentFactoryResolver)}return Object.defineProperty(e.prototype,"appointment",{get:function(){return this._registrationService.appointment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedAppointmentDate",{get:function(){return this._scheduleService.selectedSchedule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedAppointmentTimeslot",{get:function(){return this._scheduleService.selectedTimeslot},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.onAbortButtonClick=function(){var e=this;this._portalService.terminateUserSession().subscribe({next:function(){e._heartbeatService.stop(),e._router.navigate(["/landing/welcome"])},error:function(t){e._alertBoxService.show(e._ngModuleRef.componentFactoryResolver,{style:l.b.Error,buttons:[{label:"close"}],message:{scopeName:e.scopeName,label:t}})}})},e.prototype.onBackButtonClick=function(){this._router.navigate(["/registration/step5"])},e.prototype.onContinueButtonClick=function(){var e=this;this.splashScreenConfig.visibility=!0,this._registrationService.submit().subscribe({next:function(){e._heartbeatService.stop(),e._router.navigate(["/registration/step7"])},error:function(t){e.splashScreenConfig.visibility=!1,e._alertBoxService.show(e._ngModuleRef.componentFactoryResolver,{style:l.b.Error,buttons:[{label:"close"}],message:{scopeName:e.scopeName,label:t}})}})},e.prototype.getFormatedHKIC=function(e){var t=e.length-1;return e.substr(0,t)+"XXX("+e.charAt(t)+")"},e.prototype.getFormattedTime=function(e){e>1200&&(e-=1200);var t=4===e.toString().length?e.toString():"0"+e;return t.substring(0,2)+":"+t.substring(2,4)},e.\u0275fac=function(t){return new(t||e)(u.Nb(d.a),u.Nb(c.a),u.Nb(R.a),u.Nb(z),u.Nb(i.a),u.Nb(b.a),u.Nb(u.x))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-step6"]],decls:1,vars:2,consts:[[4,"transloco","translocoScope","translocoRead"],[1,"container","main-content"],[1,"container-fluid","content-box"],[1,"form-row"],[1,"col-md-5","form-label-bold"],[1,"col-md-7"],[1,"separation"],[1,"col-md-5"],["class","col-md-7",4,"ngIf"],[1,"table"],[2,"width","60px"],[4,"ngFor","ngForOf"],[3,"buttons"],[3,"position","status","visibility","message"],[1,"d-none","d-sm-block"],[1,"d-sm-block","d-md-inline"],[1,"subheader","d-sm-block","d-md-inline"]],template:function(e,t){1&e&&u.xc(0,xe,48,35,"ng-container",0),2&e&&u.jc("translocoScope",t.scopeName)("translocoRead",t.scopeName)},directives:[m.e,I.a,v.l,v.k,B.c,A.a],pipes:[v.d],styles:[""]}),e}(),Oe=n("Iab2"),Pe=n("mYgU"),Re=n.n(Pe),ke=["acknowledgement"];function Ee(e,t){if(1&e&&(u.Rb(0),u.Tb(1,"h1",24),u.Tb(2,"div",25),u.zc(3),u.Sb(),u.Tb(4,"div",26),u.zc(5),u.Sb(),u.Sb(),u.Qb()),2&e){var n=t.$implicit;u.Bb(3),u.Ac(n("systemHeader")),u.Bb(2),u.Ac(n("systemSubheader"))}}function Fe(e,t){if(1&e&&(u.Tb(0,"div",10),u.Tb(1,"label",15),u.zc(2),u.Sb(),u.Tb(3,"label",12),u.zc(4),u.Sb(),u.Sb()),2&e){var n=u.dc().$implicit,o=u.dc();u.Bb(2),u.Ac(n("lbl.hkic")),u.Bb(2),u.Ac(o.getFormatedHKIC(o.appointment.applicant.id))}}function De(e,t){if(1&e&&(u.Tb(0,"div",10),u.Tb(1,"label",15),u.zc(2),u.Sb(),u.Tb(3,"label",12),u.zc(4),u.Sb(),u.Sb()),2&e){var n=u.dc().$implicit,o=u.dc();u.Bb(2),u.Ac(n("lbl.passport")),u.Bb(2),u.Ac(o.appointment.applicant.id)}}function Me(e,t){if(1&e&&(u.Tb(0,"tr"),u.Tb(1,"td"),u.zc(2),u.Sb(),u.Tb(3,"td"),u.zc(4),u.Sb(),u.Sb()),2&e){var n=t.$implicit;u.Bb(2),u.Ac(n.seqNo),u.Bb(2),u.Ac(n.businessName)}}var je=function(e,t,n,o,r,i){return{appointmentDateEn:e,appointmentDateZh:t,periodStartTime:n,periodEndTime:o,startTimeMeridiem:r,endTimeMeridiem:i}},ze=function(e,t){return{locationEn:e,locationZh:t}};function Ie(e,t){if(1&e&&(u.Rb(0),u.Ob(1,"portal-header"),u.Tb(2,"div",1),u.xc(3,Ee,6,2,"ng-container",0),u.Tb(4,"div",2),u.Tb(5,"h2"),u.zc(6),u.Sb(),u.Sb(),u.Tb(7,"div",2,3),u.Tb(9,"p"),u.zc(10),u.Sb(),u.Ob(11,"div",4),u.Tb(12,"div",5),u.Tb(13,"div",6),u.Ob(14,"img",7),u.Sb(),u.Ob(15,"div",8),u.Tb(16,"div",9),u.Tb(17,"div",10),u.Tb(18,"label",11),u.zc(19),u.Sb(),u.Tb(20,"label",12),u.zc(21),u.Sb(),u.Sb(),u.Ob(22,"div",13),u.Tb(23,"div",10),u.Tb(24,"label",11),u.zc(25),u.Sb(),u.Tb(26,"label",12),u.zc(27),u.Sb(),u.Sb(),u.Ob(28,"div",13),u.Tb(29,"div",10),u.Tb(30,"label",11),u.zc(31),u.Sb(),u.Tb(32,"label",12),u.zc(33),u.ec(34,"date"),u.ec(35,"date"),u.Sb(),u.Sb(),u.Ob(36,"div",13),u.Tb(37,"div",10),u.Tb(38,"label",11),u.zc(39),u.Sb(),u.Tb(40,"label",12),u.zc(41),u.Sb(),u.Sb(),u.Ob(42,"div",13),u.Tb(43,"h3"),u.zc(44),u.Sb(),u.xc(45,Fe,5,2,"div",14),u.xc(46,De,5,2,"div",14),u.Tb(47,"div",10),u.Tb(48,"label",15),u.zc(49),u.Sb(),u.Tb(50,"label",12),u.zc(51),u.Sb(),u.Sb(),u.Sb(),u.Tb(52,"div",16),u.Ob(53,"img",17),u.Sb(),u.Sb(),u.Ob(54,"div",4),u.Tb(55,"h3"),u.zc(56),u.Sb(),u.Tb(57,"table",18),u.Tb(58,"thead"),u.Tb(59,"tr"),u.Tb(60,"th",19),u.zc(61),u.Sb(),u.Tb(62,"th"),u.zc(63),u.Sb(),u.Sb(),u.Sb(),u.Tb(64,"tbody"),u.xc(65,Me,5,2,"tr",20),u.Sb(),u.Sb(),u.Ob(66,"div",4),u.Tb(67,"h3"),u.zc(68),u.Sb(),u.Tb(69,"ol",21),u.Tb(70,"li"),u.zc(71),u.Sb(),u.Tb(72,"li"),u.zc(73),u.Sb(),u.Tb(74,"li"),u.zc(75),u.Sb(),u.Sb(),u.Sb(),u.Ob(76,"command-bar",22),u.Sb(),u.Ob(77,"splash-screen",23),u.Qb()),2&e){var n=t.$implicit,o=u.dc();u.Bb(3),u.jc("translocoScope","portal.Common")("translocoRead","portal.Common"),u.Bb(3),u.Ac(n("lbl.step7")),u.Bb(4),u.Ac(n("lbl.message")),u.Bb(4),u.jc("src",o.appointment.qrCode,u.vc),u.Bb(5),u.Ac(n("lbl.transactionReferenceNumber")),u.Bb(2),u.Ac(o.appointment.trn),u.Bb(4),u.Ac(n("lbl.serviceType")),u.Bb(2),u.Ac(n("lbl.serviceType."+o.appointment.serviceType)),u.Bb(4),u.Ac(n("lbl.appointmentDateTime")),u.Bb(2),u.Ac(n("lbl.appointmentDateTimeValue",u.pc(37,je,u.gc(34,31,o.appointment.appointmentDate,"d MMM yyyy"),u.gc(35,34,o.appointment.appointmentDate,"yyyy\u5e74 M\u6708 d\u65e5"),o.getFormattedTime(o.appointment.startTime),o.getFormattedTime(o.appointment.endTime),n("lbl.meridiem."+(o.appointment.startTime<1200?o.Meridiem.AM:o.Meridiem.PM)),n("lbl.meridiem."+(o.appointment.endTime<1200?o.Meridiem.AM:o.Meridiem.PM))))),u.Bb(6),u.Ac(n("lbl.location")),u.Bb(2),u.Ac(n("lbl.locationValue",u.mc(44,ze,o.appointment.locationEn,o.appointment.locationZh))),u.Bb(3),u.Ac(n("lbl.serviceUserInfo")),u.Bb(1),u.jc("ngIf",o.appointment.applicant.idType===o.IdType.HKIC),u.Bb(1),u.jc("ngIf",o.appointment.applicant.idType===o.IdType.Passport),u.Bb(3),u.Ac(n("lbl.surname")),u.Bb(2),u.Ac(o.appointment.applicant.surname),u.Bb(5),u.Ac(n("lbl.casesDetails")),u.Bb(5),u.Ac(n("lbl.number")),u.Bb(2),u.Ac(n("lbl.name")),u.Bb(2),u.jc("ngForOf",o.appointment.registrations),u.Bb(3),u.Ac(n("lbl.noticeTitle")),u.Bb(3),u.Ac(n("lbl.notice1")),u.Bb(2),u.Ac(n("lbl.notice2")),u.Bb(2),u.Ac(n("lbl.notice3")),u.Bb(1),u.jc("buttons",o.commandBarButtons),u.Bb(1),u.jc("position",o.splashScreenConfig.position)("status",o.splashScreenConfig.status)("visibility",o.splashScreenConfig.visibility)("message",o.splashScreenConfig.message)}}var Ue=[{path:"step3",canActivate:[r.a],component:K},{path:"step4",canActivate:[r.a],component:ge},{path:"step5",canActivate:[r.a],component:Te},{path:"step6",canActivate:[r.a],component:Ne},{path:"step7",canActivate:[r.a],component:function(){function e(e,t,n){var o=this;this._portalService=e,this._router=t,this._registrationService=n,this.scopeName="portal.Registration.Step7",this.IdType=P.a,this.Meridiem=G,this.commandBarButtons=[],this._portalService.setPageTitle(this.scopeName+".title"),this.splashScreenConfig={position:A.b.Fixed,message:{scopeName:this.scopeName,label:"loading"},visibility:!1,status:A.c.Loading},this.commandBarButtons.push({content:{scopeName:this.scopeName,label:"btn.print"},style:B.a.Normal,hidden:!1,disabled:!1,action:function(){return new a.a((function(e){o.onPrintButtonClick(),e.next()}))}},{content:{scopeName:this.scopeName,label:"btn.save"},style:B.a.Normal,hidden:!1,disabled:!1,action:function(){return new a.a((function(e){o.onSaveButtonClick(),e.next()}))}},{content:{scopeName:this.scopeName,label:"btn.exit"},style:B.a.Normal,hidden:!1,disabled:!1,action:function(){return new a.a((function(e){o.onExitButtonClick(),e.next()}))}})}return Object.defineProperty(e.prototype,"appointment",{get:function(){return this._registrationService.appointment},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.onExitButtonClick=function(){this._router.navigate(["/landing/welcome"])},e.prototype.onSaveButtonClick=function(){var e=this;this.splashScreenConfig.visibility=!0,Re.a.toPng(this.acknowledgement.nativeElement).then((function(t){Object(Oe.saveAs)(t,e.appointment.trn+".png"),e.splashScreenConfig.visibility=!1}))},e.prototype.onPrintButtonClick=function(){window.print()},e.prototype.getFormatedHKIC=function(e){var t=e.length-1;return e.substr(0,t)+"XXX("+e.charAt(t)+")"},e.prototype.getFormattedTime=function(e){e>1200&&(e-=1200);var t=4===e.toString().length?e.toString():"0"+e;return t.substring(0,2)+":"+t.substring(2,4)},e.\u0275fac=function(t){return new(t||e)(u.Nb(d.a),u.Nb(c.a),u.Nb(z))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-step7"]],viewQuery:function(e,t){var n;1&e&&u.Dc(ke,!0),2&e&&u.qc(n=u.cc())&&(t.acknowledgement=n.first)},decls:1,vars:2,consts:[[4,"transloco","translocoScope","translocoRead"],[1,"container","main-content"],[1,"container-fluid","content-box"],["acknowledgement",""],[1,"separation"],[1,"row"],[1,"col-12","text-center","d-block","d-lg-none"],[1,"qrcode",3,"src"],[1,"col-12","separation","d-block","d-lg-none"],[1,"col-12","col-lg-9"],[1,"form-row"],[1,"col-md-5","form-label-bold"],[1,"col-md-7"],[1,"col-12","separation"],["class","form-row",4,"ngIf"],[1,"col-md-5"],[1,"col-3","text-center","d-none","d-lg-block"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAB8CAYAAACrHtS+AAAF8ElEQVR4Xu3dwZLbMAwDUOf/PzqdHtuoM28NRnZS7JmiKICgKNnxPo7jeB43+Hs+z4fxeDxeVrDyt7JbLV1jmZ53Bw2/kTqP9GCECvJqymngNZbpeQfh/KerEr6ApoRvSD0FuQrPyHhReAK8hpKUQt2bdR26r+vapuPTeVUIJXzR8CUgl/AFelX4cWgFSpJvhXMVXoW//5RWhd9c4Uljc/c9bUd8SYJrSdd1UEkv4ZkiSzhehWp2q10CfNJkJfPq2qrwDacDJaOEV+HLY9mOrfPWe/gOAFSld3+q9hUlvYR7OpbwxfP1JIGqcEw+zTy1w2nH98gSjsgrkWqH05bw4zhO36UnpVCJ1HOuHnE0MRJ/Ojax03Uozrfu0vUZrybLtL+ESCWohA+f4ZW0JFl0jh2VtAoPEighsgrH15QVZC2FiT8dm9jpOjSBSOE6qdpNA6CL1aOVllbtHXS9ip/ane7SdQK1UwAS4K8am+z1ip/alfAFUtPVoYQPP6bcUZaT6lDCS/jyxkv3fy3fmmi3/qlRstdrqb7KLiEyGVvC8anadGIkpCVjS3gJT/Ln/NhpBd3d33mkspFV+P+m8OeOdjFLyj9G65FJj2/a3SYVY3D5satHCX/FcPp0ELM06KCED98T3L1glvASPlg/3uCqe3gG6tu7dG12kmXoHDvK7fT+P+7v3Z/tUjJK+PoXqiU8eMRZhR9HS3pSWjY0fFV4Fc4/slhup3/v4brnTpdHzeTpm7HkRm46lgRTxY9eYlRnSXVM5tCxeqTbAnzwenSUaFX4K3wlfDgbkwxNxlbhiy69e/h1X2zaUlnk4kUDSfbSJNF0Xq0OSS+yY6xitVxvCX/9bwo7SEvmKOFBj6H7ekLQ9NgSXsKX7763pONV6LQip/29XeHTt1FJ86QN5I45dDtQgpK16XpPPzzZEdx0oiUEKaAac3Ky0IpBvx5VZyV8/ZWkEo4ZNK2+aUVO+6vC8V9RJJVlOqkSf19BuC5C7a5SVUJkEnOyHWAhPf/GS9J5lnClx99zU4+jXboSqXaJWqYTUtWXxKxzaAU6ffGSBJIAn4CXzKuAaj+h/hKcq/DhX4UqGUmS6hxJAlFJTzJ5x1jN7mm76a1puirRS4yaZZrJJXydZpos43ZXPA+fTpZp5ao/JSNZr87BdiVc6X21U5BL+AKBBLzzlGUjk5h17Ljd2deUd+z1yWKVyuke46qYtXM//UOEEu63YNp9J0lawhG9KhwvLKrwKnz5q8arOlQU+NfEfJuSvqOJuTu5O5Je53h701bC99y0lfAFAlc1aEqGdvPJOqrw4BJIq1cJD04Cul/f6RTxcYRrwN9Chq5DO2P1p0kaVRa5Wi3h3ngl5Jbwi/ZXJa0KV6Ru3kHrMkq4IlXCGanxo9qdP5CvzUlix8ijoZ6Rp/sinffW30tPiFRlII9spsCX8A0N2lV7rmZLEp8mWhWubKCdAl+FV+H8nRY9ry+TSt5axeSOzJI9d4eqNL5puwjUlYhKuH2nbZpI9VfCgzN8sm8qQdN2JbyERzlAPyaMZsDBqoykYanC8WvKyBmb6YWKOlR/es7VJlDnTdahCa6x0BsvGrDaaXDT/kp4Fb7MqSpcpYZ2VfgaqKQCKaYt6UHXryCjDvimTRtc+gKEOtNFqL/ETmNRglRpOu8OO8WPFJ4AoIEkdgpoCcemrYRrSl1np4Kpwi96R346NUr4AtGW9C8p6UrktKqSq1qNRZWr/r6ipJdwpbsKd6TQMmlwk3tzDO/189nTJUT97bBTUBK7Eo5dcAlfp5niokn6FXt40jwlD0q0BGt8SSyaGCV8UYGUoBKODyK0q1a7qwgq4SV8/DNgmswt6cP/Fku77+l9+BLCtQNUOy3VapeAomN1bao09Te9bVDTlgSngCpQVylIMdB1qL8SHnTVSbIoQSV8gZSWarVLqoiOLeGKQAnnd9UU0qRSfdwvT5KSqUAp8Imddv3JHMvq9Wm/Hi3hWQpU4Rl+p0dX4cNP1ZLjzGkWfzCwhJfwH6TLedNfjp2UH6IXCYsAAAAASUVORK5CYII=",1,"qrcode"],[1,"table"],[2,"width","60px"],[4,"ngFor","ngForOf"],[1,"text-break"],[3,"buttons"],[3,"position","status","visibility","message"],[1,"d-none","d-sm-block"],[1,"d-sm-block","d-md-inline"],[1,"subheader","d-sm-block","d-md-inline"]],template:function(e,t){1&e&&u.xc(0,Ie,78,47,"ng-container",0),2&e&&u.jc("translocoScope",t.scopeName)("translocoRead",t.scopeName)},directives:[m.e,I.a,v.l,v.k,B.c,A.a],pipes:[v.d],styles:[".qrcode[_ngcontent-%COMP%]{width:200px}"]}),e}()},{path:"**",redirectTo:"step3"}],Le=function(){function e(){}return e.\u0275mod=u.Lb({type:e}),e.\u0275inj=u.Kb({factory:function(t){return new(t||e)},imports:[[c.b.forChild(Ue)],c.b]}),e}(),He=n("omRH"),qe=n("kL1a"),Ve=function(){function e(e,t,n,o){this._translateService=e,this._languageService=t,this._coalescingResolver=n,this._localResolver=o,this._coalescingResolver.registerResolver(this._localResolver),this._languageService.register(this._translateService)}return e.\u0275mod=u.Lb({type:e}),e.\u0275inj=u.Kb({factory:function(t){return new(t||e)(u.Xb(m.h),u.Xb(He.a),u.Xb(qe.a),u.Xb(u.j))},providers:[i.a,z,r.a],imports:[[o.a,Le]]}),e}()},"9AGB":function(e,t,n){"use strict";var o=n("yoF8");function r(e){return 0===e.length?o.identity:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(e)},t.pipeFromArray=r},D2Nl:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("JHWP")),i=n("Iwry"),c=/url\((['"]?)([^'"]+?)\1\)/g;function s(e){var t=[];return e.replace(c,(function(e,n,o){return t.push(o),e})),t.filter((function(e){return!i.isDataUrl(e)}))}function a(e){return-1!==e.search(c)}t.shouldEmbed=a,t.default=function(e,t,n){return a(e)?Promise.resolve(e).then(s).then((function(o){return o.reduce((function(e,o){return e.then((function(e){return function(e,t,n,o){var c=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;var n=document.implementation.createHTMLDocument(),o=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(r),t&&(o.href=t),r.href=e,r.href}(t,n):t;return Promise.resolve(c).then((function(e){return r.default(e,o)})).then((function(e){return i.toDataURL(e,i.getMimeType(t))})).then((function(n){return e.replace(new RegExp("(url\\(['\"]?)("+function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}(t)+")(['\"]?\\))","g"),"$1"+n+"$3")})).then((function(e){return e}),(function(){return c}))}(e,o,t,n)}))}),Promise.resolve(e))})):Promise.resolve(e)}},FWf1:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=n("pshJ"),i=n("GiSu"),c=n("zB/H"),s=n("p//D"),a=n("n3uD"),l=n("MkmW"),u=function(e){function t(n,o,r){var c=e.call(this)||this;switch(c.syncErrorValue=null,c.syncErrorThrown=!1,c.syncErrorThrowable=!1,c.isStopped=!1,arguments.length){case 0:c.destination=i.empty;break;case 1:if(!n){c.destination=i.empty;break}if("object"==typeof n){n instanceof t?(c.syncErrorThrowable=n.syncErrorThrowable,c.destination=n,n.add(c)):(c.syncErrorThrowable=!0,c.destination=new b(c,n));break}default:c.syncErrorThrowable=!0,c.destination=new b(c,n,o,r)}return c}return o(t,e),t.prototype[s.rxSubscriber]=function(){return this},t.create=function(e,n,o){var r=new t(e,n,o);return r.syncErrorThrowable=!1,r},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(c.Subscription);t.Subscriber=u;var b=function(e){function t(t,n,o,c){var s,a=e.call(this)||this;a._parentSubscriber=t;var l=a;return r.isFunction(n)?s=n:n&&(s=n.next,o=n.error,c=n.complete,n!==i.empty&&(l=Object.create(n),r.isFunction(l.unsubscribe)&&a.add(l.unsubscribe.bind(l)),l.unsubscribe=a.unsubscribe.bind(a))),a._context=l,a._next=s,a._error=o,a._complete=c,a}return o(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=a.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):l.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;l.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};a.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.config.useDeprecatedSynchronousErrorHandling)throw n;l.hostReportError(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!a.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(o){return a.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=o,e.syncErrorThrown=!0,!0):(l.hostReportError(o),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u);t.SafeSubscriber=b},GMZp:function(e,t,n){"use strict";t.isObject=function(e){return null!==e&&"object"==typeof e}},GiSu:function(e,t,n){"use strict";var o=n("n3uD"),r=n("MkmW");t.empty={closed:!0,next:function(e){},error:function(e){if(o.config.useDeprecatedSynchronousErrorHandling)throw e;r.hostReportError(e)},complete:function(){}}},Iab2:function(e,t,n){var o,r;void 0===(r="function"==typeof(o=function(){"use strict";function t(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){i(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype?function(e,i,c){var s=r.URL||r.webkitURL,a=document.createElement("a");a.download=i=i||e.name||"download",a.rel="noopener","string"==typeof e?(a.href=e,a.origin===location.origin?o(a):n(a.href)?t(e,i,c):o(a,a.target="_blank")):(a.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(a.href)}),4e4),setTimeout((function(){o(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,r,i){if(r=r||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),r);else if(n(e))t(e,r,i);else{var c=document.createElement("a");c.href=e,c.target="_blank",setTimeout((function(){o(c)}))}}:function(e,n,o,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,o);var c="application/octet-stream"===e.type,s=/constructor/i.test(r.HTMLElement)||r.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||c&&s)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},l.readAsDataURL(e)}else{var u=r.URL||r.webkitURL,b=u.createObjectURL(e);i?i.location=b:location.href=b,i=null,setTimeout((function(){u.revokeObjectURL(b)}),4e4)}});r.saveAs=i.saveAs=i,e.exports=i})?o.apply(t,[]):o)||(e.exports=r)},Iwry:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r="application/font-woff",i={woff:r,woff2:r,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"};function c(e){var t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function s(e){var t=c(e).toLowerCase();return i[t]||""}function a(e){return new Promise((function(t,n){var o=new Image;o.onload=function(){t(o)},o.onerror=n,o.crossOrigin="anonymous",o.src=e}))}function l(e){return e.split(/,/)[1]}function u(e,t){var n=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(n.replace("px",""))}function b(){return window.devicePixelRatio||1}t.uuid=(o=0,function(){return o+=1,"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+o}),t.parseExtension=c,t.getMimeType=s,t.delay=function(e){return function(t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))}},t.createImage=a,t.isDataUrl=function(e){return-1!==e.search(/^(data:)/)},t.toDataURL=function(e,t){return"data:"+t+";base64,"+e},t.getDataURLContent=l,t.canvasToBlob=function(e){return e.toBlob?new Promise((function(t){e.toBlob(t)})):function(e){return new Promise((function(t){for(var n=window.atob(e.toDataURL().split(",")[1]),o=n.length,r=new Uint8Array(o),i=0;i<o;i+=1)r[i]=n.charCodeAt(i);t(new Blob([r],{type:"image/png"}))}))}(e)},t.toArray=function(e){for(var t=[],n=0,o=e.length;n<o;n+=1)t.push(e[n]);return t},t.getNodeWidth=function(e){var t=u(e,"border-left-width"),n=u(e,"border-right-width");return e.scrollWidth+t+n},t.getNodeHeight=function(e){var t=u(e,"border-top-width"),n=u(e,"border-bottom-width");return e.scrollHeight+t+n},t.getPixelRatio=b,t.svgToDataURL=function(e){return Promise.resolve().then((function(){return(new XMLSerializer).serializeToString(e)})).then(encodeURIComponent).then((function(e){return"data:image/svg+xml;charset=utf-8,"+e}))},t.getBlobFromImageURL=function(e){return a(e).then((function(t){var n=t.width,o=t.height,r=document.createElement("canvas"),i=r.getContext("2d"),c=b();return r.width=n*c,r.height=o*c,r.style.width=""+n,r.style.height=""+o,i.scale(c,c),i.drawImage(t,0,0),l(r.toDataURL(s(e)))}))}},JHWP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Iwry");t.default=function(e,t){return t.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime()),(window.fetch?window.fetch(e).then((function(e){return e.blob()})).then((function(e){return new Promise((function(t,n){var o=new FileReader;o.onloadend=function(){return t(o.result)},o.onerror=n,o.readAsDataURL(e)}))})).then(o.getDataURLContent).catch((function(){return new Promise((function(e,t){t()}))})):new Promise((function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var i=new FileReader;i.onloadend=function(){t(o.getDataURLContent(i.result))},i.readAsDataURL(r.response)}else n(new Error("Failed to fetch resource: "+e+", status: "+r.status))},r.ontimeout=function(){n(new Error("Timeout of 30000ms occured while fetching resource: "+e))},r.responseType="blob",r.timeout=3e4,r.open("GET",e,!0),r.send()}))).catch((function(n){var o="";if(t.imagePlaceholder){var r=t.imagePlaceholder.split(/,/);r&&r[1]&&(o=r[1])}var i="Failed to fetch resource: "+e;return n&&(i="string"==typeof n?n:n.message),i&&console.error(i),o}))}},LBXl:function(e,t,n){"use strict";t.UnsubscriptionError=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},MkmW:function(e,t,n){"use strict";t.hostReportError=function(e){setTimeout((function(){throw e}),0)}},Q1FS:function(e,t,n){"use strict";var o=n("yx2s"),r=n("Xwq/"),i=n("zfKp"),c=n("9AGB"),s=n("n3uD");function a(e){if(e||(e=s.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}t.Observable=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o=this.operator,i=r.toSubscriber(e,t,n);if(i.add(o?o.call(i,this.source):this.source||s.config.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.config.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){s.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),o.canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=a(t))((function(t,o){var r;r=n.subscribe((function(t){try{e(t)}catch(n){o(n),r&&r.unsubscribe()}}),o,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[i.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:c.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=a(e))((function(e,n){var o;t.subscribe((function(e){return o=e}),(function(e){return n(e)}),(function(){return e(o)}))}))},e.create=function(t){return new e(t)},e}()},WfVW:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n("Iwry"),i=o(n("JHWP")),c=o(n("D2Nl"));t.default=function e(t,n){return t instanceof Element?Promise.resolve(t).then((function(e){return function(e,t){var n=e.style.getPropertyValue("background");return n?Promise.resolve(n).then((function(e){return c.default(e,null,t)})).then((function(t){return e.style.setProperty("background",t,e.style.getPropertyPriority("background")),e})):Promise.resolve(e)}(e,n)})).then((function(e){return function(e,t){return e instanceof HTMLImageElement&&!r.isDataUrl(e.src)?Promise.resolve(e.src).then((function(e){return i.default(e,t)})).then((function(t){return r.toDataURL(t,r.getMimeType(e.src))})).then((function(t){return new Promise((function(n,o){e.onload=n,e.onerror=o,e.src=t}))})).then((function(){return e}),(function(){return e})):Promise.resolve(e)}(e,n)})).then((function(t){return function(t,n){var o=r.toArray(t.childNodes).map((function(t){return e(t,n)}));return Promise.all(o).then((function(){return t}))}(t,n)})):Promise.resolve(t)}},"Xwq/":function(e,t,n){"use strict";var o=n("FWf1"),r=n("p//D"),i=n("GiSu");t.toSubscriber=function(e,t,n){if(e){if(e instanceof o.Subscriber)return e;if(e[r.rxSubscriber])return e[r.rxSubscriber]()}return e||t||n?new o.Subscriber(e,t,n):new o.Subscriber(i.empty)}},Ya8i:function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n("Iwry"),i=o(n("D2Nl"));function c(e){if(void 0===e)return[];var t=e,n=[],o=new RegExp("(\\/\\*[\\s\\S]*?\\*\\/)","gi");t=t.replace(o,"");for(var r,i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");null!==(r=i.exec(t));)n.push(r[0]);t=t.replace(i,"");for(var c=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");null!==(r=c.exec(t));)n.push(r[0]);return n}function s(e,t){return fetch(e).then((function(t){return{url:e,cssText:t.text()}}),(function(e){console.log("ERROR FETCHING CSS: ",e.toString())}))}function a(e){return e.cssText.then((function(t){var n=t,o=(n.match(/url\([^)]+\)/g)||[]).map((function(t){var o=t.replace(/url\(([^]+)\)/g,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),new Promise((function(e,r){fetch(o).then((function(e){return e.blob()})).then((function(o){var r=new FileReader;r.addEventListener("load",(function(o){n=n.replace(t,"url("+r.result+")"),e([t,r.result])})),r.readAsDataURL(o)})).catch(r)}))}));return Promise.all(o).then((function(){return n}))}))}function l(e){var t=[],n=[];return e.forEach((function(t){if("cssRules"in t)try{r.toArray(t.cssRules).forEach((function(e){e.type===CSSRule.IMPORT_RULE&&n.push(s(e.href).then(a).then((function(e){c(e).forEach((function(e){t.insertRule(e,t.cssRules.length)}))})).catch((function(e){console.log("Error loading remote css",e.toString())})))}))}catch(i){var o=e.find((function(e){return null===e.href}))||document.styleSheets[0];null!=t.href&&n.push(s(t.href).then(a).then((function(e){c(e).forEach((function(e){o.insertRule(e,t.cssRules.length)}))})).catch((function(e){console.log("Error loading remote stylesheet",e.toString())}))),console.log("Error inlining remote css file",i.toString())}})),Promise.all(n).then((function(){return e.forEach((function(e){if("cssRules"in e)try{r.toArray(e.cssRules).forEach((function(e){t.push(e)}))}catch(n){console.log("Error while reading CSS rules from "+e.href,n.toString())}})),t}))}function u(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return i.shouldEmbed(e.style.getPropertyValue("src"))}))}function b(e){return new Promise((function(t,n){e.ownerDocument||n(new Error("Provided element is not within a Document")),t(r.toArray(e.ownerDocument.styleSheets))})).then(l).then(u)}t.parseWebFontRules=b,t.default=function(e,t){return b(e).then((function(e){return Promise.all(e.map((function(e){return i.default(e.cssText,e.parentStyleSheet?e.parentStyleSheet.href:null,t)})))})).then((function(e){return e.join("\n")})).then((function(t){var n=document.createElement("style"),o=document.createTextNode(t);return n.appendChild(o),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),e}))}},mYgU:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("yOtm")),i=o(n("Ya8i")),c=o(n("WfVW")),s=o(n("xkiS")),a=o(n("t0N9")),l=n("Iwry");function u(e,t){return void 0===t&&(t={}),{width:t.width||l.getNodeWidth(e),height:t.height||l.getNodeHeight(e)}}function b(e,t){void 0===t&&(t={});var n=u(e,t),o=n.width,l=n.height;return r.default(e,t.filter,!0).then((function(e){return i.default(e,t)})).then((function(e){return c.default(e,t)})).then((function(e){return a.default(e,t)})).then((function(e){return s.default(e,o,l)}))}function d(e,t){return void 0===t&&(t={}),b(e,t).then(l.createImage).then(l.delay(100)).then((function(n){var o=document.createElement("canvas"),r=o.getContext("2d"),i=l.getPixelRatio(),c=u(e,t),s=c.width,a=c.height;return o.width=s*i,o.height=a*i,o.style.width=""+s,o.style.height=""+a,r.scale(i,i),t.backgroundColor&&(r.fillStyle=t.backgroundColor,r.fillRect(0,0,o.width,o.height)),r.drawImage(n,0,0),o}))}function p(e,t){void 0===t&&(t={});var n=u(e,t),o=n.width,r=n.height;return d(e,t).then((function(e){return e.getContext("2d").getImageData(0,0,o,r).data}))}function m(e,t){return void 0===t&&(t={}),d(e,t).then((function(e){return e.toDataURL()}))}function f(e,t){return void 0===t&&(t={}),d(e,t).then((function(e){return e.toDataURL("image/jpeg",t.quality||1)}))}function h(e,t){return void 0===t&&(t={}),d(e,t).then(l.canvasToBlob)}t.toSvgDataURL=b,t.toCanvas=d,t.toPixelData=p,t.toPng=m,t.toJpeg=f,t.toBlob=h,t.default={toSvgDataURL:b,toCanvas:d,toPixelData:p,toPng:m,toJpeg:f,toBlob:h}},mbIT:function(e,t,n){"use strict";t.isArray=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},n3uD:function(e,t,n){"use strict";var o=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else o&&console.log("RxJS: Back to a better error behavior. Thank you. <3");o=e},get useDeprecatedSynchronousErrorHandling(){return o}}},"p//D":function(e,t,n){"use strict";t.rxSubscriber=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),t.$$rxSubscriber=t.rxSubscriber},pshJ:function(e,t,n){"use strict";t.isFunction=function(e){return"function"==typeof e}},t0N9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.style;return t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=t.width+"px"),t.height&&(n.height=t.height+"px"),t.style&&Object.assign(n,t.style),e}},vTYg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Iwry");t.default=function(e,t){[":before",":after"].forEach((function(n){return function(e,t,n){var r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(""!==i&&"none"!==i){var c=o.uuid(),s=document.createElement("style");s.appendChild(function(e,t,n){var r="."+e+":"+t,i=n.cssText?function(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}(n):function(e){return o.toArray(e).map((function(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")+";"})).join(" ")}(n);return document.createTextNode(r+"{"+i+"}")}(c,n,r)),t.className=t.className+" "+c,t.appendChild(s)}}(e,t,n)}))}},xkiS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Iwry");t.default=function(e,t,n){var r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),c=document.createElementNS(r,"foreignObject");return i.setAttributeNS("","width",""+t),i.setAttributeNS("","height",""+n),c.setAttributeNS("","width","100%"),c.setAttributeNS("","height","100%"),c.setAttributeNS("","x","0"),c.setAttributeNS("","y","0"),c.setAttributeNS("","externalResourcesRequired","true"),i.appendChild(c),c.appendChild(e),o.svgToDataURL(i)}},yOtm:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n("Iwry"),i=o(n("vTYg"));function c(e){return e instanceof HTMLCanvasElement?r.createImage(e.toDataURL()):e.tagName&&"svg"===e.tagName.toLowerCase()?Promise.resolve(e).then((function(e){return r.svgToDataURL(e)})).then(r.createImage):Promise.resolve(e.cloneNode(!1))}t.default=function e(t,n,o){return o||!n||n(t)?Promise.resolve(t).then(c).then((function(o){return function(t,n,o){var i=r.toArray(t.childNodes);return 0===i.length?Promise.resolve(n):i.reduce((function(t,r){return t.then((function(){return e(r,o)})).then((function(e){e&&n.appendChild(e)}))}),Promise.resolve()).then((function(){return n}))}(t,o,n)})).then((function(e){return function(e,t){return t instanceof Element?Promise.resolve().then((function(){return function(e,t){var n=window.getComputedStyle(e),o=t.style;n.cssText?o.cssText=n.cssText:r.toArray(n).forEach((function(e){o.setProperty(e,n.getPropertyValue(e),n.getPropertyPriority(e))}))}(e,t)})).then((function(){return i.default(e,t)})).then((function(){return function(e,t){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}(e,t)})).then((function(){return t})):t}(t,e)})):Promise.resolve(null)}},yoF8:function(e,t,n){"use strict";t.identity=function(e){return e}},yx2s:function(e,t,n){"use strict";var o=n("FWf1");t.canReportError=function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof o.Subscriber?t:null}return!0}},"zB/H":function(e,t,n){"use strict";var o=n("mbIT"),r=n("GMZp"),i=n("pshJ"),c=n("LBXl");function s(e){return e.reduce((function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)}),[])}t.Subscription=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,a=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var u=0;u<n.length;++u)n[u].remove(this);if(i.isFunction(a))try{a.call(this)}catch(p){t=p instanceof c.UnsubscriptionError?s(p.errors):[p]}if(o.isArray(l)){u=-1;for(var b=l.length;++u<b;){var d=l[u];if(r.isObject(d))try{d.unsubscribe()}catch(p){t=t||[],p instanceof c.UnsubscriptionError?t=t.concat(s(p.errors)):t.push(p)}}}if(t)throw new c.UnsubscriptionError(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var o=n;(n=new e)._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}()},zfKp:function(e,t,n){"use strict";t.observable=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()}}]);